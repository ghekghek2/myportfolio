{"ast":null,"code":"var $ = require('jquery');\nvar has3d,\n  vendor = '',\n  PI = Math.PI,\n  A90 = PI / 2,\n  isTouch = ('ontouchstart' in window),\n  events = isTouch ? {\n    start: 'touchstart',\n    move: 'touchmove',\n    end: 'touchend'\n  } : {\n    start: 'mousedown',\n    move: 'mousemove',\n    end: 'mouseup'\n  },\n  // Contansts used for each corner\n  // tl * tr\n  // *     *\n  // bl * br\n\n  corners = {\n    backward: ['bl', 'tl'],\n    forward: ['br', 'tr'],\n    all: ['tl', 'bl', 'tr', 'br']\n  },\n  displays = ['single', 'double'],\n  // Default options\n\n  turnOptions = {\n    // First page\n\n    page: 1,\n    // Enables gradients\n\n    gradients: true,\n    // Duration of transition in milliseconds\n\n    duration: 600,\n    // Enables hardware acceleration\n\n    acceleration: true,\n    // Display\n\n    display: 'double',\n    // Events\n\n    when: null\n  },\n  flipOptions = {\n    // Back page\n\n    folding: null,\n    // Corners\n    // backward: Activates both tl and bl corners\n    // forward: Activates both tr and br corners\n    // all: Activates all the corners\n\n    corners: 'forward',\n    // Size of the active zone of each corner\n\n    cornerSize: 100,\n    // Enables gradients\n\n    gradients: true,\n    // Duration of transition in milliseconds\n\n    duration: 600,\n    // Enables hardware acceleration\n\n    acceleration: true\n  },\n  // Number of pages in the DOM, minimum value: 6\n\n  pagesInDOM = 6,\n  pagePosition = {\n    0: {\n      top: 0,\n      left: 0,\n      right: 'auto',\n      bottom: 'auto'\n    },\n    1: {\n      top: 0,\n      right: 0,\n      left: 'auto',\n      bottom: 'auto'\n    }\n  },\n  // Gets basic attributes for a layer\n\n  divAtt = function (top, left, zIndex, overf) {\n    return {\n      'css': {\n        position: 'absolute',\n        top: top,\n        left: left,\n        'overflow': overf || 'hidden',\n        'z-index': zIndex || 'auto'\n      }\n    };\n  },\n  // Gets a 2D point from a bezier curve of four points\n\n  bezier = function (p1, p2, p3, p4, t) {\n    var mum1 = 1 - t,\n      mum13 = mum1 * mum1 * mum1,\n      mu3 = t * t * t;\n    return point2D(Math.round(mum13 * p1.x + 3 * t * mum1 * mum1 * p2.x + 3 * t * t * mum1 * p3.x + mu3 * p4.x), Math.round(mum13 * p1.y + 3 * t * mum1 * mum1 * p2.y + 3 * t * t * mum1 * p3.y + mu3 * p4.y));\n  },\n  // Converts an angle from degrees to radians\n\n  rad = function (degrees) {\n    return degrees / 180 * PI;\n  },\n  // Converts an angle from radians to degrees\n\n  deg = function (radians) {\n    return radians / PI * 180;\n  },\n  // Gets a 2D point\n\n  point2D = function (x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  },\n  // Returns the traslate value\n\n  translate = function (x, y, use3d) {\n    return has3d && use3d ? ' translate3d(' + x + 'px,' + y + 'px, 0px) ' : ' translate(' + x + 'px, ' + y + 'px) ';\n  },\n  // Returns the rotation value\n\n  rotate = function (degrees) {\n    return ' rotate(' + degrees + 'deg) ';\n  },\n  // Checks if a property belongs to an object\n\n  has = function (property, object) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  },\n  // Gets the CSS3 vendor prefix\n\n  getPrefix = function () {\n    var vendorPrefixes = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'],\n      len = vendorPrefixes.length,\n      vendor = '';\n    while (len--) if (vendorPrefixes[len] + 'Transform' in document.body.style) vendor = '-' + vendorPrefixes[len].toLowerCase() + '-';\n    return vendor;\n  },\n  // Adds gradients\n\n  gradient = function (obj, p0, p1, colors, numColors) {\n    var j,\n      cols = [];\n    if (vendor == '-webkit-') {\n      for (j = 0; j < numColors; j++) cols.push('color-stop(' + colors[j][0] + ', ' + colors[j][1] + ')');\n      obj.css({\n        'background-image': '-webkit-gradient(linear, ' + p0.x + '% ' + p0.y + '%,  ' + p1.x + '% ' + p1.y + '%, ' + cols.join(',') + ' )'\n      });\n    } else {\n      // This procedure makes the gradients for non-webkit browsers\n      // It will be reduced to one unique way for gradients in next versions\n\n      p0 = {\n        x: p0.x / 100 * obj.width(),\n        y: p0.y / 100 * obj.height()\n      };\n      p1 = {\n        x: p1.x / 100 * obj.width(),\n        y: p1.y / 100 * obj.height()\n      };\n      var dx = p1.x - p0.x,\n        dy = p1.y - p0.y,\n        angle = Math.atan2(dy, dx),\n        angle2 = angle - Math.PI / 2,\n        diagonal = Math.abs(obj.width() * Math.sin(angle2)) + Math.abs(obj.height() * Math.cos(angle2)),\n        gradientDiagonal = Math.sqrt(dy * dy + dx * dx),\n        corner = point2D(p1.x < p0.x ? obj.width() : 0, p1.y < p0.y ? obj.height() : 0),\n        slope = Math.tan(angle),\n        inverse = -1 / slope,\n        x = (inverse * corner.x - corner.y - slope * p0.x + p0.y) / (inverse - slope),\n        c = {\n          x: x,\n          y: inverse * x - inverse * corner.x + corner.y\n        },\n        segA = Math.sqrt(Math.pow(c.x - p0.x, 2) + Math.pow(c.y - p0.y, 2));\n      for (j = 0; j < numColors; j++) cols.push(' ' + colors[j][1] + ' ' + (segA + gradientDiagonal * colors[j][0]) * 100 / diagonal + '%');\n      obj.css({\n        'background-image': vendor + 'linear-gradient(' + -angle + 'rad,' + cols.join(',') + ')'\n      });\n    }\n  },\n  turnMethods = {\n    // Singleton constructor\n    // $('#selector').turn([options]);\n\n    init: function (opts) {\n      // Define constants\n      if (has3d === undefined) {\n        has3d = 'WebKitCSSMatrix' in window || 'MozPerspective' in document.body.style;\n        vendor = getPrefix();\n      }\n      var i,\n        data = this.data(),\n        ch = this.children();\n      opts = $.extend({\n        width: this.width(),\n        height: this.height()\n      }, turnOptions, opts);\n      data.opts = opts;\n      data.pageObjs = {};\n      data.pages = {};\n      data.pageWrap = {};\n      data.pagePlace = {};\n      data.pageMv = [];\n      data.totalPages = opts.pages || 0;\n      if (opts.when) for (i in opts.when) if (has(i, opts.when)) this.bind(i, opts.when[i]);\n      this.css({\n        position: 'relative',\n        width: opts.width,\n        height: opts.height\n      });\n      this.turn('display', opts.display);\n      if (has3d && !isTouch && opts.acceleration) this.transform(translate(0, 0, true));\n      for (i = 0; i < ch.length; i++) this.turn('addPage', ch[i], i + 1);\n      this.turn('page', opts.page);\n\n      // allow setting active corners as an option\n      corners = $.extend({}, corners, opts.corners);\n\n      // Event listeners\n\n      $(this).bind(events.start, function (e) {\n        for (var page in data.pages) if (has(page, data.pages) && flipMethods._eventStart.call(data.pages[page], e) === false) return false;\n      });\n      $(document).bind(events.move, function (e) {\n        for (var page in data.pages) if (has(page, data.pages)) flipMethods._eventMove.call(data.pages[page], e);\n      }).bind(events.end, function (e) {\n        for (var page in data.pages) if (has(page, data.pages)) flipMethods._eventEnd.call(data.pages[page], e);\n      });\n      data.done = true;\n      return this;\n    },\n    // Adds a page from external data\n\n    addPage: function (element, page) {\n      var incPages = false,\n        data = this.data(),\n        lastPage = data.totalPages + 1;\n      if (page) {\n        if (page == lastPage) {\n          page = lastPage;\n          incPages = true;\n        } else if (page > lastPage) throw new Error('It is impossible to add the page \"' + page + '\", the maximum value is: \"' + lastPage + '\"');\n      } else {\n        page = lastPage;\n        incPages = true;\n      }\n      if (page >= 1 && page <= lastPage) {\n        // Stop animations\n        if (data.done) this.turn('stop');\n\n        // Move pages if it's necessary\n        if (page in data.pageObjs) turnMethods._movePages.call(this, page, 1);\n\n        // Update number of pages\n        if (incPages) data.totalPages = lastPage;\n\n        // Add element\n        data.pageObjs[page] = $(element).addClass('turn-page p' + page);\n\n        // Add page\n        turnMethods._addPage.call(this, page);\n\n        // Update view\n        if (data.done) this.turn('update');\n        turnMethods._removeFromDOM.call(this);\n      }\n      return this;\n    },\n    // Adds a page from internal data\n\n    _addPage: function (page) {\n      var data = this.data(),\n        element = data.pageObjs[page];\n      if (element) if (turnMethods._necessPage.call(this, page)) {\n        if (!data.pageWrap[page]) {\n          var pageWidth = data.display == 'double' ? this.width() / 2 : this.width(),\n            pageHeight = this.height();\n          element.css({\n            width: pageWidth,\n            height: pageHeight\n          });\n\n          // Place\n          data.pagePlace[page] = page;\n\n          // Wrapper\n          data.pageWrap[page] = $('<div/>', {\n            'class': 'turn-page-wrapper',\n            page: page,\n            css: {\n              position: 'absolute',\n              overflow: 'hidden',\n              width: pageWidth,\n              height: pageHeight\n            }\n          }).css(pagePosition[data.display == 'double' ? page % 2 : 0]);\n\n          // Append to this\n          this.append(data.pageWrap[page]);\n\n          // Move data.pageObjs[page] (element) to wrapper\n          data.pageWrap[page].prepend(data.pageObjs[page]);\n        }\n\n        // If the page is in the current view, create the flip effect\n        if (!page || turnMethods._setPageLoc.call(this, page) == 1) turnMethods._makeFlip.call(this, page);\n      } else {\n        // Place\n        data.pagePlace[page] = 0;\n\n        // Remove element from the DOM\n        if (data.pageObjs[page]) data.pageObjs[page].remove();\n      }\n    },\n    // Checks if a page is in memory\n\n    hasPage: function (page) {\n      return page in this.data().pageObjs;\n    },\n    // Prepares the flip effect for a page\n\n    _makeFlip: function (page) {\n      var data = this.data();\n      if (!data.pages[page] && data.pagePlace[page] == page) {\n        var single = data.display == 'single',\n          even = page % 2;\n        data.pages[page] = data.pageObjs[page].css({\n          width: single ? this.width() : this.width() / 2,\n          height: this.height()\n        }).flip({\n          page: page,\n          next: single && page === data.totalPages ? page - 1 : even || single ? page + 1 : page - 1,\n          turn: this,\n          duration: data.opts.duration,\n          acceleration: data.opts.acceleration,\n          corners: single ? 'all' : even ? 'forward' : 'backward',\n          backGradient: data.opts.gradients,\n          frontGradient: data.opts.gradients\n        }).flip('disable', data.disabled).bind('pressed', turnMethods._pressed).bind('released', turnMethods._released).bind('start', turnMethods._start).bind('end', turnMethods._end).bind('flip', turnMethods._flip);\n      }\n      return data.pages[page];\n    },\n    // Makes pages within a range\n\n    _makeRange: function () {\n      var page,\n        data = this.data(),\n        range = this.turn('range');\n      for (page = range[0]; page <= range[1]; page++) turnMethods._addPage.call(this, page);\n    },\n    // Returns a range of `pagesInDOM` pages that should be in the DOM\n    // Example:\n    // - page of the current view, return true\n    // * page is in the range, return true\n    // 0 page is not in the range, return false\n    //\n    // 1 2-3 4-5 6-7 8-9 10-11 12-13\n    //    **  **  --   **  **\n\n    range: function (page) {\n      var remainingPages,\n        left,\n        right,\n        data = this.data();\n      page = page || data.tpage || data.page;\n      var view = turnMethods._view.call(this, page);\n      if (page < 1 || page > data.totalPages) throw new Error('\"' + page + '\" is not a page for range');\n      view[1] = view[1] || view[0];\n      if (view[0] >= 1 && view[1] <= data.totalPages) {\n        remainingPages = Math.floor((pagesInDOM - 2) / 2);\n        if (data.totalPages - view[1] > view[0]) {\n          left = Math.min(view[0] - 1, remainingPages);\n          right = 2 * remainingPages - left;\n        } else {\n          right = Math.min(data.totalPages - view[1], remainingPages);\n          left = 2 * remainingPages - right;\n        }\n      } else {\n        left = pagesInDOM - 1;\n        right = pagesInDOM - 1;\n      }\n      return [Math.max(1, view[0] - left), Math.min(data.totalPages, view[1] + right)];\n    },\n    // Detects if a page is within the range of `pagesInDOM` from the current view\n\n    _necessPage: function (page) {\n      if (page === 0) return true;\n      var range = this.turn('range');\n      return page >= range[0] && page <= range[1];\n    },\n    // Releases memory by removing pages from the DOM\n\n    _removeFromDOM: function () {\n      var page,\n        data = this.data();\n      for (page in data.pageWrap) if (has(page, data.pageWrap) && !turnMethods._necessPage.call(this, page)) turnMethods._removePageFromDOM.call(this, page);\n    },\n    // Removes a page from DOM and its internal references\n\n    _removePageFromDOM: function (page) {\n      var data = this.data();\n      if (data.pages[page]) {\n        var dd = data.pages[page].data();\n        if (dd.f && dd.f.fwrapper) dd.f.fwrapper.remove();\n        data.pages[page].remove();\n        delete data.pages[page];\n      }\n      if (data.pageObjs[page]) data.pageObjs[page].remove();\n      if (data.pageWrap[page]) {\n        data.pageWrap[page].remove();\n        delete data.pageWrap[page];\n      }\n      delete data.pagePlace[page];\n    },\n    // Removes a page\n\n    removePage: function (page) {\n      var data = this.data();\n      if (data.pageObjs[page]) {\n        // Stop animations\n        this.turn('stop');\n\n        // Remove `page`\n        turnMethods._removePageFromDOM.call(this, page);\n        delete data.pageObjs[page];\n\n        // Move the pages behind `page`\n        turnMethods._movePages.call(this, page, -1);\n\n        // Resize the size of this magazine\n        data.totalPages = data.totalPages - 1;\n        turnMethods._makeRange.call(this);\n\n        // Check the current view\n        if (data.page > data.totalPages) this.turn('page', data.totalPages);\n      }\n      return this;\n    },\n    // Moves pages\n\n    _movePages: function (from, change) {\n      var page,\n        data = this.data(),\n        single = data.display == 'single',\n        move = function (page) {\n          var next = page + change,\n            odd = next % 2;\n          if (data.pageObjs[page]) data.pageObjs[next] = data.pageObjs[page].removeClass('page' + page).addClass('page' + next);\n          if (data.pagePlace[page] && data.pageWrap[page]) {\n            data.pagePlace[next] = next;\n            data.pageWrap[next] = data.pageWrap[page].css(pagePosition[single ? 0 : odd]).attr('page', next);\n            if (data.pages[page]) data.pages[next] = data.pages[page].flip('options', {\n              page: next,\n              next: single || odd ? next + 1 : next - 1,\n              corners: single ? 'all' : odd ? 'forward' : 'backward'\n            });\n            if (change) {\n              delete data.pages[page];\n              delete data.pagePlace[page];\n              delete data.pageObjs[page];\n              delete data.pageWrap[page];\n              delete data.pageObjs[page];\n            }\n          }\n        };\n      if (change > 0) for (page = data.totalPages; page >= from; page--) move(page);else for (page = from; page <= data.totalPages; page++) move(page);\n    },\n    // Sets or Gets the display mode\n\n    display: function (display) {\n      var data = this.data(),\n        currentDisplay = data.display;\n      if (display) {\n        if ($.inArray(display, displays) == -1) throw new Error('\"' + display + '\" is not a value for display');\n        if (display == 'single') {\n          if (!data.pageObjs[0]) {\n            this.turn('stop').css({\n              'overflow': 'hidden'\n            });\n            data.pageObjs[0] = $('<div />', {\n              'class': 'turn-page p-temporal'\n            }).css({\n              width: this.width(),\n              height: this.height()\n            }).appendTo(this);\n          }\n        } else {\n          if (data.pageObjs[0]) {\n            this.turn('stop').css({\n              'overflow': ''\n            });\n            data.pageObjs[0].remove();\n            delete data.pageObjs[0];\n          }\n        }\n        data.display = display;\n        if (currentDisplay) {\n          var size = this.turn('size');\n          turnMethods._movePages.call(this, 1, 0);\n          this.turn('size', size.width, size.height).turn('update');\n        }\n        return this;\n      } else return currentDisplay;\n    },\n    // Detects if the pages are being animated\n\n    animating: function () {\n      return this.data().pageMv.length > 0;\n    },\n    // Disables and enables the effect\n\n    disable: function (bool) {\n      var page,\n        data = this.data(),\n        view = this.turn('view');\n      data.disabled = bool === undefined || bool === true;\n      for (page in data.pages) if (has(page, data.pages)) data.pages[page].flip('disable', bool ? $.inArray(page, view) : false);\n      return this;\n    },\n    // Gets and sets the size\n\n    size: function (width, height) {\n      if (width && height) {\n        var data = this.data(),\n          pageWidth = data.display == 'double' ? width / 2 : width,\n          page;\n        this.css({\n          width: width,\n          height: height\n        });\n        if (data.pageObjs[0]) data.pageObjs[0].css({\n          width: pageWidth,\n          height: height\n        });\n        for (page in data.pageWrap) {\n          if (!has(page, data.pageWrap)) continue;\n          data.pageObjs[page].css({\n            width: pageWidth,\n            height: height\n          });\n          data.pageWrap[page].css({\n            width: pageWidth,\n            height: height\n          });\n          if (data.pages[page]) data.pages[page].css({\n            width: pageWidth,\n            height: height\n          });\n        }\n        this.turn('resize');\n        return this;\n      } else {\n        return {\n          width: this.width(),\n          height: this.height()\n        };\n      }\n    },\n    // Resizes each page\n\n    resize: function () {\n      var page,\n        data = this.data();\n      if (data.pages[0]) {\n        data.pageWrap[0].css({\n          left: -this.width()\n        });\n        data.pages[0].flip('resize', true);\n      }\n      for (page = 1; page <= data.totalPages; page++) if (data.pages[page]) data.pages[page].flip('resize', true);\n    },\n    // Removes an animation from the cache\n\n    _removeMv: function (page) {\n      var i,\n        data = this.data();\n      for (i = 0; i < data.pageMv.length; i++) if (data.pageMv[i] == page) {\n        data.pageMv.splice(i, 1);\n        return true;\n      }\n      return false;\n    },\n    // Adds an animation to the cache\n\n    _addMv: function (page) {\n      var data = this.data();\n      turnMethods._removeMv.call(this, page);\n      data.pageMv.push(page);\n    },\n    // Gets indexes for a view\n\n    _view: function (page) {\n      var data = this.data();\n      page = page || data.page;\n      if (data.display == 'double') return page % 2 ? [page - 1, page] : [page, page + 1];else return [page];\n    },\n    // Gets a view\n\n    view: function (page) {\n      var data = this.data(),\n        view = turnMethods._view.call(this, page);\n      return data.display == 'double' ? [view[0] > 0 ? view[0] : 0, view[1] <= data.totalPages ? view[1] : 0] : [view[0] > 0 && view[0] <= data.totalPages ? view[0] : 0];\n    },\n    // Stops animations\n\n    stop: function (ok) {\n      var i,\n        opts,\n        data = this.data(),\n        pages = data.pageMv;\n      data.pageMv = [];\n      if (data.tpage) {\n        data.page = data.tpage;\n        delete data['tpage'];\n      }\n      for (i in pages) {\n        if (!has(i, pages)) continue;\n        opts = data.pages[pages[i]].data().f.opts;\n        flipMethods._moveFoldingPage.call(data.pages[pages[i]], null);\n        data.pages[pages[i]].flip('hideFoldedPage');\n        data.pagePlace[opts.next] = opts.next;\n        if (opts.force) {\n          opts.next = opts.page % 2 === 0 ? opts.page - 1 : opts.page + 1;\n          delete opts['force'];\n        }\n      }\n      this.turn('update');\n      return this;\n    },\n    // Gets and sets the number of pages\n\n    pages: function (pages) {\n      var data = this.data();\n      if (pages) {\n        if (pages < data.totalPages) {\n          for (var page = pages + 1; page <= data.totalPages; page++) this.turn('removePage', page);\n          if (this.turn('page') > pages) this.turn('page', pages);\n        }\n        data.totalPages = pages;\n        return this;\n      } else return data.totalPages;\n    },\n    // Sets a page without effect\n\n    _fitPage: function (page, ok) {\n      var data = this.data(),\n        newView = this.turn('view', page);\n      if (data.page != page) {\n        this.trigger('turning', [page, newView]);\n        if ($.inArray(1, newView) != -1) this.trigger('first');\n        if ($.inArray(data.totalPages, newView) != -1) this.trigger('last');\n      }\n      if (!data.pageObjs[page]) return;\n      data.tpage = page;\n      this.turn('stop', ok);\n      turnMethods._removeFromDOM.call(this);\n      turnMethods._makeRange.call(this);\n      this.trigger('turned', [page, newView]);\n    },\n    // Turns to a page\n\n    _turnPage: function (page) {\n      var current,\n        next,\n        data = this.data(),\n        view = this.turn('view'),\n        newView = this.turn('view', page);\n      if (data.page != page) {\n        this.trigger('turning', [page, newView]);\n        if ($.inArray(1, newView) != -1) this.trigger('first');\n        if ($.inArray(data.totalPages, newView) != -1) this.trigger('last');\n      }\n      if (!data.pageObjs[page]) return;\n      data.tpage = page;\n      this.turn('stop');\n      turnMethods._makeRange.call(this);\n      if (data.display == 'single') {\n        current = view[0];\n        next = newView[0];\n      } else if (view[1] && page > view[1]) {\n        current = view[1];\n        next = newView[0];\n      } else if (view[0] && page < view[0]) {\n        current = view[0];\n        next = newView[1];\n      }\n      if (data.pages[current]) {\n        var opts = data.pages[current].data().f.opts;\n        data.tpage = next;\n        if (opts.next != next) {\n          opts.next = next;\n          data.pagePlace[next] = opts.page;\n          opts.force = true;\n        }\n        if (data.display == 'single') data.pages[current].flip('turnPage', newView[0] > view[0] ? 'br' : 'bl');else data.pages[current].flip('turnPage');\n      }\n    },\n    // Gets and sets a page\n\n    page: function (page) {\n      page = parseInt(page, 10);\n      var data = this.data();\n      if (page > 0 && page <= data.totalPages) {\n        if (!data.done || $.inArray(page, this.turn('view')) != -1) turnMethods._fitPage.call(this, page);else turnMethods._turnPage.call(this, page);\n        return this;\n      } else return data.page;\n    },\n    // Turns to the next view\n\n    next: function () {\n      var data = this.data();\n      return this.turn('page', turnMethods._view.call(this, data.page).pop() + 1);\n    },\n    // Turns to the previous view\n\n    previous: function () {\n      var data = this.data();\n      return this.turn('page', turnMethods._view.call(this, data.page).shift() - 1);\n    },\n    // Adds a motion to the internal list\n\n    _addMotionPage: function () {\n      var opts = $(this).data().f.opts,\n        turn = opts.turn,\n        dd = turn.data();\n      opts.pageMv = opts.page;\n      turnMethods._addMv.call(turn, opts.pageMv);\n      dd.pagePlace[opts.next] = opts.page;\n      turn.turn('update');\n    },\n    // This event is called in context of flip\n\n    _start: function (e, opts, corner) {\n      var data = opts.turn.data(),\n        event = $.Event('start');\n      e.stopPropagation();\n      opts.turn.trigger(event, [opts, corner]);\n      if (event.isDefaultPrevented()) {\n        e.preventDefault();\n        return;\n      }\n      if (data.display == 'single') {\n        var left = corner.charAt(1) == 'l';\n        if (opts.page == 1 && left || opts.page == data.totalPages && !left) e.preventDefault();else {\n          if (left) {\n            opts.next = opts.next < opts.page ? opts.next : opts.page - 1;\n            opts.force = true;\n          } else opts.next = opts.next > opts.page ? opts.next : opts.page + 1;\n        }\n      }\n      turnMethods._addMotionPage.call(this);\n    },\n    // This event is called in context of flip\n\n    _end: function (e, turned) {\n      var that = $(this),\n        data = that.data().f,\n        opts = data.opts,\n        turn = opts.turn,\n        dd = turn.data();\n      e.stopPropagation();\n      if (turned || dd.tpage) {\n        if (dd.tpage == opts.next || dd.tpage == opts.page) {\n          delete dd['tpage'];\n          turnMethods._fitPage.call(turn, dd.tpage || opts.next, true);\n        }\n      } else {\n        turnMethods._removeMv.call(turn, opts.pageMv);\n        turn.turn('update');\n      }\n    },\n    // This event is called in context of flip\n\n    _pressed: function () {\n      var page,\n        that = $(this),\n        data = that.data().f,\n        turn = data.opts.turn,\n        pages = turn.data().pages;\n      for (page in pages) if (page != data.opts.page) pages[page].flip('disable', true);\n      return data.time = new Date().getTime();\n    },\n    // This event is called in context of flip\n\n    _released: function (e, point) {\n      var that = $(this),\n        data = that.data().f;\n      e.stopPropagation();\n      if (new Date().getTime() - data.time < 200 || point.x < 0 || point.x > $(this).width()) {\n        e.preventDefault();\n        data.opts.turn.data().tpage = data.opts.next;\n        data.opts.turn.turn('update');\n        $(that).flip('turnPage');\n      }\n    },\n    // This event is called in context of flip\n\n    _flip: function () {\n      var opts = $(this).data().f.opts;\n      opts.turn.trigger('turn', [opts.next]);\n    },\n    // Calculate the z-index value for pages during the animation\n\n    calculateZ: function (mv) {\n      var i,\n        page,\n        nextPage,\n        placePage,\n        dpage,\n        that = this,\n        data = this.data(),\n        view = this.turn('view'),\n        currentPage = view[0] || view[1],\n        r = {\n          pageZ: {},\n          partZ: {},\n          pageV: {}\n        },\n        addView = function (page) {\n          var view = that.turn('view', page);\n          if (view[0]) r.pageV[view[0]] = true;\n          if (view[1]) r.pageV[view[1]] = true;\n        };\n      for (i = 0; i < mv.length; i++) {\n        page = mv[i];\n        nextPage = data.pages[page].data().f.opts.next;\n        placePage = data.pagePlace[page];\n        addView(page);\n        addView(nextPage);\n        dpage = data.pagePlace[nextPage] == nextPage ? nextPage : page;\n        r.pageZ[dpage] = data.totalPages - Math.abs(currentPage - dpage);\n        r.partZ[placePage] = data.totalPages * 2 + Math.abs(currentPage - dpage);\n      }\n      return r;\n    },\n    // Updates the z-index and display property of every page\n\n    update: function () {\n      var page,\n        data = this.data();\n      if (data.pageMv.length && data.pageMv[0] !== 0) {\n        // Update motion\n\n        var apage,\n          pos = this.turn('calculateZ', data.pageMv),\n          view = this.turn('view', data.tpage);\n        if (data.pagePlace[view[0]] == view[0]) apage = view[0];else if (data.pagePlace[view[1]] == view[1]) apage = view[1];\n        for (page in data.pageWrap) {\n          if (!has(page, data.pageWrap)) continue;\n          data.pageWrap[page].css({\n            display: pos.pageV[page] ? '' : 'none',\n            'z-index': pos.pageZ[page] || 0\n          });\n          if (data.pages[page]) {\n            data.pages[page].flip('z', pos.partZ[page] || null);\n            if (pos.pageV[page]) data.pages[page].flip('resize');\n            if (data.tpage) data.pages[page].flip('disable', true); // data.disabled || page!=apage\n          }\n        }\n      } else {\n        // Update static pages\n\n        for (page in data.pageWrap) {\n          if (!has(page, data.pageWrap)) continue;\n          var pageLocation = turnMethods._setPageLoc.call(this, page);\n          if (data.pages[page]) data.pages[page].flip('disable', data.disabled || pageLocation != 1).flip('z', null);\n        }\n      }\n    },\n    // Sets the z-index and display property of a page\n    // It depends on the current view\n\n    _setPageLoc: function (page) {\n      var data = this.data(),\n        view = this.turn('view');\n      if (page == view[0] || page == view[1]) {\n        data.pageWrap[page].css({\n          'z-index': data.totalPages,\n          display: ''\n        });\n        return 1;\n      } else if (data.display == 'single' && page == view[0] + 1 || data.display == 'double' && page == view[0] - 2 || page == view[1] + 2) {\n        data.pageWrap[page].css({\n          'z-index': data.totalPages - 1,\n          display: ''\n        });\n        return 2;\n      } else {\n        data.pageWrap[page].css({\n          'z-index': 0,\n          display: 'none'\n        });\n        return 0;\n      }\n    }\n  },\n  // Methods and properties for the flip page effect\n\n  flipMethods = {\n    // Constructor\n\n    init: function (opts) {\n      if (opts.gradients) {\n        opts.frontGradient = true;\n        opts.backGradient = true;\n      }\n      this.data({\n        f: {}\n      });\n      this.flip('options', opts);\n      flipMethods._addPageWrapper.call(this);\n      return this;\n    },\n    setData: function (d) {\n      var data = this.data();\n      data.f = $.extend(data.f, d);\n      return this;\n    },\n    options: function (opts) {\n      var data = this.data().f;\n      if (opts) {\n        flipMethods.setData.call(this, {\n          opts: $.extend({}, data.opts || flipOptions, opts)\n        });\n        return this;\n      } else return data.opts;\n    },\n    z: function (z) {\n      var data = this.data().f;\n      data.opts['z-index'] = z;\n      data.fwrapper.css({\n        'z-index': z || parseInt(data.parent.css('z-index'), 10) || 0\n      });\n      return this;\n    },\n    _cAllowed: function () {\n      return corners[this.data().f.opts.corners] || this.data().f.opts.corners;\n    },\n    _cornerActivated: function (e) {\n      if (e.originalEvent === undefined) {\n        return false;\n      }\n      e = isTouch ? e.originalEvent.touches : [e];\n      var data = this.data().f,\n        pos = data.parent.offset(),\n        width = this.width(),\n        height = this.height(),\n        c = {\n          x: Math.max(0, e[0].pageX - pos.left),\n          y: Math.max(0, e[0].pageY - pos.top)\n        },\n        csz = data.opts.cornerSize,\n        allowedCorners = flipMethods._cAllowed.call(this);\n      if (c.x <= 0 || c.y <= 0 || c.x >= width || c.y >= height) return false;\n      if (c.y < csz) c.corner = 't';else if (c.y >= height - csz) c.corner = 'b';else return false;\n      if (c.x <= csz) c.corner += 'l';else if (c.x >= width - csz) c.corner += 'r';else return false;\n      return $.inArray(c.corner, allowedCorners) == -1 ? false : c;\n    },\n    _c: function (corner, opts) {\n      opts = opts || 0;\n      return {\n        tl: point2D(opts, opts),\n        tr: point2D(this.width() - opts, opts),\n        bl: point2D(opts, this.height() - opts),\n        br: point2D(this.width() - opts, this.height() - opts)\n      }[corner];\n    },\n    _c2: function (corner) {\n      return {\n        tl: point2D(this.width() * 2, 0),\n        tr: point2D(-this.width(), 0),\n        bl: point2D(this.width() * 2, this.height()),\n        br: point2D(-this.width(), this.height())\n      }[corner];\n    },\n    _foldingPage: function (corner) {\n      var opts = this.data().f.opts;\n      if (opts.folding) return opts.folding;else if (opts.turn) {\n        var data = opts.turn.data();\n        if (data.display == 'single') return data.pageObjs[opts.next] ? data.pageObjs[0] : null;else return data.pageObjs[opts.next];\n      }\n    },\n    _backGradient: function () {\n      var data = this.data().f,\n        turn = data.opts.turn,\n        gradient = data.opts.backGradient && (!turn || turn.data().display == 'single' || data.opts.page != 2 && data.opts.page != turn.data().totalPages - 1);\n      if (gradient && !data.bshadow) data.bshadow = $('<div/>', divAtt(0, 0, 1)).css({\n        'position': '',\n        width: this.width(),\n        height: this.height()\n      }).appendTo(data.parent);\n      return gradient;\n    },\n    resize: function (full) {\n      var data = this.data().f,\n        width = this.width(),\n        height = this.height(),\n        size = Math.round(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n      if (full) {\n        data.wrapper.css({\n          width: size,\n          height: size\n        });\n        data.fwrapper.css({\n          width: size,\n          height: size\n        }).children(':first-child').css({\n          width: width,\n          height: height\n        });\n        data.fpage.css({\n          width: height,\n          height: width\n        });\n        if (data.opts.frontGradient) data.ashadow.css({\n          width: height,\n          height: width\n        });\n        if (flipMethods._backGradient.call(this)) data.bshadow.css({\n          width: width,\n          height: height\n        });\n      }\n      if (data.parent.is(':visible')) {\n        data.fwrapper.css({\n          top: data.parent.offset().top,\n          left: data.parent.offset().left\n        });\n        if (data.opts.turn) data.fparent.css({\n          top: -data.opts.turn.offset().top,\n          left: -data.opts.turn.offset().left\n        });\n      }\n      this.flip('z', data.opts['z-index']);\n    },\n    // Prepares the page by adding a general wrapper and another objects\n\n    _addPageWrapper: function () {\n      var att,\n        data = this.data().f,\n        parent = this.parent();\n      if (!data.wrapper) {\n        var left = this.css('left'),\n          top = this.css('top'),\n          width = this.width(),\n          height = this.height(),\n          size = Math.round(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n        data.parent = parent;\n        data.fparent = data.opts.turn ? data.opts.turn.data().fparent : $('#turn-fwrappers');\n        if (!data.fparent) {\n          var fparent = $('<div/>', {\n            css: {\n              'pointer-events': 'none'\n            }\n          }).hide();\n          fparent.data().flips = 0;\n          if (data.opts.turn) {\n            fparent.css(divAtt(-data.opts.turn.offset().top, -data.opts.turn.offset().left, 'auto', 'visible').css).appendTo(data.opts.turn);\n            data.opts.turn.data().fparent = fparent;\n          } else {\n            fparent.css(divAtt(0, 0, 'auto', 'visible').css).attr('id', 'turn-fwrappers').appendTo($('body'));\n          }\n          data.fparent = fparent;\n        }\n        this.css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          bottom: 'auto',\n          right: 'auto'\n        });\n        data.wrapper = $('<div/>', divAtt(0, 0, this.css('z-index'))).appendTo(parent).prepend(this);\n        data.fwrapper = $('<div/>', divAtt(parent.offset().top, parent.offset().left)).hide().appendTo(data.fparent);\n        data.fpage = $('<div/>', {\n          css: {\n            cursor: 'default'\n          }\n        }).appendTo($('<div/>', divAtt(0, 0, 0, 'visible')).appendTo(data.fwrapper));\n        if (data.opts.frontGradient) data.ashadow = $('<div/>', divAtt(0, 0, 1)).appendTo(data.fpage);\n\n        // Save data\n\n        flipMethods.setData.call(this, data);\n\n        // Set size\n        flipMethods.resize.call(this, true);\n      }\n    },\n    // Takes a 2P point from the screen and applies the transformation\n\n    _fold: function (point) {\n      var that = this,\n        a = 0,\n        alpha = 0,\n        beta,\n        px,\n        gradientEndPointA,\n        gradientEndPointB,\n        gradientStartV,\n        gradientSize,\n        gradientOpacity,\n        mv = point2D(0, 0),\n        df = point2D(0, 0),\n        tr = point2D(0, 0),\n        width = this.width(),\n        height = this.height(),\n        folding = flipMethods._foldingPage.call(this),\n        tan = Math.tan(alpha),\n        data = this.data().f,\n        ac = data.opts.acceleration,\n        h = data.wrapper.height(),\n        o = flipMethods._c.call(this, point.corner),\n        top = point.corner.substr(0, 1) == 't',\n        left = point.corner.substr(1, 1) == 'l',\n        compute = function () {\n          var rel = point2D(o.x ? o.x - point.x : point.x, o.y ? o.y - point.y : point.y),\n            tan = Math.atan2(rel.y, rel.x),\n            middle;\n          alpha = A90 - tan;\n          a = deg(alpha);\n          middle = point2D(left ? width - rel.x / 2 : point.x + rel.x / 2, rel.y / 2);\n          var gamma = alpha - Math.atan2(middle.y, middle.x),\n            distance = Math.max(0, Math.sin(gamma) * Math.sqrt(Math.pow(middle.x, 2) + Math.pow(middle.y, 2)));\n          tr = point2D(distance * Math.sin(alpha), distance * Math.cos(alpha));\n          if (alpha > A90) {\n            tr.x = tr.x + Math.abs(tr.y * Math.tan(tan));\n            tr.y = 0;\n            if (Math.round(tr.x * Math.tan(PI - alpha)) < height) {\n              point.y = Math.sqrt(Math.pow(height, 2) + 2 * middle.x * rel.x);\n              if (top) point.y = height - point.y;\n              return compute();\n            }\n          }\n          if (alpha > A90) {\n            var beta = PI - alpha,\n              dd = h - height / Math.sin(beta);\n            mv = point2D(Math.round(dd * Math.cos(beta)), Math.round(dd * Math.sin(beta)));\n            if (left) mv.x = -mv.x;\n            if (top) mv.y = -mv.y;\n          }\n          px = Math.round(tr.y / Math.tan(alpha) + tr.x);\n          var side = width - px,\n            sideX = side * Math.cos(alpha * 2),\n            sideY = side * Math.sin(alpha * 2);\n          df = point2D(Math.round(left ? side - sideX : px + sideX), Math.round(top ? sideY : height - sideY));\n\n          // GRADIENTS\n\n          gradientSize = side * Math.sin(alpha);\n          var endingPoint = flipMethods._c2.call(that, point.corner),\n            far = Math.sqrt(Math.pow(endingPoint.x - point.x, 2) + Math.pow(endingPoint.y - point.y, 2));\n          gradientOpacity = far < width ? far / width : 1;\n          if (data.opts.frontGradient) {\n            gradientStartV = gradientSize > 100 ? (gradientSize - 100) / gradientSize : 0;\n            gradientEndPointA = point2D(gradientSize * Math.sin(A90 - alpha) / height * 100, gradientSize * Math.cos(A90 - alpha) / width * 100);\n            if (top) gradientEndPointA.y = 100 - gradientEndPointA.y;\n            if (left) gradientEndPointA.x = 100 - gradientEndPointA.x;\n          }\n          if (flipMethods._backGradient.call(that)) {\n            gradientEndPointB = point2D(gradientSize * Math.sin(alpha) / width * 100, gradientSize * Math.cos(alpha) / height * 100);\n            if (!left) gradientEndPointB.x = 100 - gradientEndPointB.x;\n            if (!top) gradientEndPointB.y = 100 - gradientEndPointB.y;\n          }\n          //\n\n          tr.x = Math.round(tr.x);\n          tr.y = Math.round(tr.y);\n          return true;\n        },\n        transform = function (tr, c, x, a) {\n          var f = ['0', 'auto'],\n            mvW = (width - h) * x[0] / 100,\n            mvH = (height - h) * x[1] / 100,\n            v = {\n              left: f[c[0]],\n              top: f[c[1]],\n              right: f[c[2]],\n              bottom: f[c[3]]\n            },\n            aliasingFk = a != 90 && a != -90 ? left ? -1 : 1 : 0;\n          x = x[0] + '% ' + x[1] + '%';\n          that.css(v).transform(rotate(a) + translate(tr.x + aliasingFk, tr.y, ac), x);\n          data.fpage.parent().css(v);\n          data.wrapper.transform(translate(-tr.x + mvW - aliasingFk, -tr.y + mvH, ac) + rotate(-a), x);\n          data.fwrapper.transform(translate(-tr.x + mv.x + mvW, -tr.y + mv.y + mvH, ac) + rotate(-a), x);\n          data.fpage.parent().transform(rotate(a) + translate(tr.x + df.x - mv.x, tr.y + df.y - mv.y, ac), x);\n          if (data.opts.frontGradient) gradient(data.ashadow, point2D(left ? 100 : 0, top ? 100 : 0), point2D(gradientEndPointA.x, gradientEndPointA.y), [[gradientStartV, 'rgba(0,0,0,0)'], [(1 - gradientStartV) * 0.8 + gradientStartV, 'rgba(0,0,0,' + 0.2 * gradientOpacity + ')'], [1, 'rgba(255,255,255,' + 0.2 * gradientOpacity + ')']], 3, alpha);\n          if (flipMethods._backGradient.call(that)) gradient(data.bshadow, point2D(left ? 0 : 100, top ? 0 : 100), point2D(gradientEndPointB.x, gradientEndPointB.y), [[0.8, 'rgba(0,0,0,0)'], [1, 'rgba(0,0,0,' + 0.3 * gradientOpacity + ')'], [1, 'rgba(0,0,0,0)']], 3);\n        };\n      switch (point.corner) {\n        case 'tl':\n          point.x = Math.max(point.x, 1);\n          compute();\n          transform(tr, [1, 0, 0, 1], [100, 0], a);\n          data.fpage.transform(translate(-height, -width, ac) + rotate(90 - a * 2), '100% 100%');\n          folding.transform(rotate(90) + translate(0, -height, ac), '0% 0%');\n          break;\n        case 'tr':\n          point.x = Math.min(point.x, width - 1);\n          compute();\n          transform(point2D(-tr.x, tr.y), [0, 0, 0, 1], [0, 0], -a);\n          data.fpage.transform(translate(0, -width, ac) + rotate(-90 + a * 2), '0% 100%');\n          folding.transform(rotate(270) + translate(-width, 0, ac), '0% 0%');\n          break;\n        case 'bl':\n          point.x = Math.max(point.x, 1);\n          compute();\n          transform(point2D(tr.x, -tr.y), [1, 1, 0, 0], [100, 100], -a);\n          data.fpage.transform(translate(-height, 0, ac) + rotate(-90 + a * 2), '100% 0%');\n          folding.transform(rotate(270) + translate(-width, 0, ac), '0% 0%');\n          break;\n        case 'br':\n          point.x = Math.min(point.x, width - 1);\n          compute();\n          transform(point2D(-tr.x, -tr.y), [0, 1, 1, 0], [0, 100], a);\n          data.fpage.transform(rotate(90 - a * 2), '0% 0%');\n          folding.transform(rotate(90) + translate(0, -height, ac), '0% 0%');\n          break;\n      }\n      data.point = point;\n    },\n    _moveFoldingPage: function (bool) {\n      var data = this.data().f,\n        folding = flipMethods._foldingPage.call(this);\n      if (folding) {\n        if (bool) {\n          if (!data.fpage.children()[data.ashadow ? '1' : '0']) {\n            flipMethods.setData.call(this, {\n              backParent: folding.parent()\n            });\n            data.fpage.prepend(folding);\n          }\n        } else {\n          if (data.backParent) data.backParent.prepend(folding);\n        }\n      }\n    },\n    _showFoldedPage: function (c, animate) {\n      var folding = flipMethods._foldingPage.call(this),\n        dd = this.data(),\n        data = dd.f;\n      if (!data.point || data.point.corner != c.corner) {\n        var event = $.Event('start');\n        this.trigger(event, [data.opts, c.corner]);\n        if (event.isDefaultPrevented()) return false;\n      }\n      if (folding) {\n        if (animate) {\n          var that = this,\n            point = data.point && data.point.corner == c.corner ? data.point : flipMethods._c.call(this, c.corner, 1);\n          this.animatef({\n            from: [point.x, point.y],\n            to: [c.x, c.y],\n            duration: 500,\n            frame: function (v) {\n              c.x = Math.round(v[0]);\n              c.y = Math.round(v[1]);\n              flipMethods._fold.call(that, c);\n            }\n          });\n        } else {\n          flipMethods._fold.call(this, c);\n          if (dd.effect && !dd.effect.turning) this.animatef(false);\n        }\n        if (!data.fwrapper.is(':visible')) {\n          data.fparent.show().data().flips++;\n          flipMethods._moveFoldingPage.call(this, true);\n          data.fwrapper.show();\n          if (data.bshadow) data.bshadow.show();\n        }\n        return true;\n      }\n      return false;\n    },\n    hide: function () {\n      var data = this.data().f,\n        folding = flipMethods._foldingPage.call(this);\n      if (--data.fparent.data().flips === 0) data.fparent.hide();\n      this.css({\n        left: 0,\n        top: 0,\n        right: 'auto',\n        bottom: 'auto'\n      }).transform('', '0% 100%');\n      data.wrapper.transform('', '0% 100%');\n      data.fwrapper.hide();\n      if (data.bshadow) data.bshadow.hide();\n      folding.transform('', '0% 0%');\n      return this;\n    },\n    hideFoldedPage: function (animate) {\n      var data = this.data().f;\n      if (!data.point) return;\n      var that = this,\n        p1 = data.point,\n        hide = function () {\n          data.point = null;\n          that.flip('hide');\n          that.trigger('end', [false]);\n        };\n      if (animate) {\n        var p4 = flipMethods._c.call(this, p1.corner),\n          top = p1.corner.substr(0, 1) == 't',\n          delta = top ? Math.min(0, p1.y - p4.y) / 2 : Math.max(0, p1.y - p4.y) / 2,\n          p2 = point2D(p1.x, p1.y + delta),\n          p3 = point2D(p4.x, p4.y - delta);\n        this.animatef({\n          from: 0,\n          to: 1,\n          frame: function (v) {\n            var np = bezier(p1, p2, p3, p4, v);\n            p1.x = np.x;\n            p1.y = np.y;\n            flipMethods._fold.call(that, p1);\n          },\n          complete: hide,\n          duration: 800,\n          hiding: true\n        });\n      } else {\n        this.animatef(false);\n        hide();\n      }\n    },\n    turnPage: function (corner) {\n      var that = this,\n        data = this.data().f;\n      corner = {\n        corner: data.corner ? data.corner.corner : corner || flipMethods._cAllowed.call(this)[0]\n      };\n      var p1 = data.point || flipMethods._c.call(this, corner.corner, data.opts.turn ? data.opts.turn.data().opts.elevation : 0),\n        p4 = flipMethods._c2.call(this, corner.corner);\n      this.trigger('flip').animatef({\n        from: 0,\n        to: 1,\n        frame: function (v) {\n          var np = bezier(p1, p1, p4, p4, v);\n          corner.x = np.x;\n          corner.y = np.y;\n          flipMethods._showFoldedPage.call(that, corner);\n        },\n        complete: function () {\n          that.trigger('end', [true]);\n        },\n        duration: data.opts.duration,\n        turning: true\n      });\n      data.corner = null;\n    },\n    moving: function () {\n      return 'effect' in this.data();\n    },\n    isTurning: function () {\n      return this.flip('moving') && this.data().effect.turning;\n    },\n    _eventStart: function (e) {\n      var data = this.data().f;\n      if (!data.disabled && !this.flip('isTurning')) {\n        data.corner = flipMethods._cornerActivated.call(this, e);\n        if (data.corner && flipMethods._foldingPage.call(this, data.corner)) {\n          flipMethods._moveFoldingPage.call(this, true);\n          this.trigger('pressed', [data.point]);\n          return false;\n        } else data.corner = null;\n      }\n    },\n    _eventMove: function (e) {\n      var data = this.data().f;\n      if (!data.disabled) {\n        e = isTouch ? e.originalEvent.touches : [e];\n        if (data.corner) {\n          var pos = data.parent.offset();\n          data.corner.x = e[0].pageX - pos.left;\n          data.corner.y = e[0].pageY - pos.top;\n          flipMethods._showFoldedPage.call(this, data.corner);\n        } else if (!this.data().effect && this.is(':visible')) {\n          // roll over\n\n          var corner = flipMethods._cornerActivated.call(this, e[0]);\n          if (corner) {\n            var origin = flipMethods._c.call(this, corner.corner, data.opts.cornerSize / 2);\n            corner.x = origin.x;\n            corner.y = origin.y;\n            flipMethods._showFoldedPage.call(this, corner, true);\n          } else flipMethods.hideFoldedPage.call(this, true);\n        }\n      }\n    },\n    _eventEnd: function () {\n      var data = this.data().f;\n      if (!data.disabled && data.point) {\n        var event = $.Event('released');\n        this.trigger(event, [data.point]);\n        if (!event.isDefaultPrevented()) flipMethods.hideFoldedPage.call(this, true);\n      }\n      data.corner = null;\n    },\n    disable: function (disable) {\n      flipMethods.setData.call(this, {\n        'disabled': disable\n      });\n      return this;\n    }\n  },\n  cla = function (that, methods, args) {\n    if (!args[0] || typeof args[0] == 'object') return methods.init.apply(that, args);else if (methods[args[0]] && args[0].toString().substr(0, 1) != '_') return methods[args[0]].apply(that, Array.prototype.slice.call(args, 1));else throw args[0] + ' is an invalid value';\n  };\n$.extend($.fn, {\n  flip: function (req, opts) {\n    return cla(this, flipMethods, arguments);\n  },\n  turn: function (req) {\n    return cla(this, turnMethods, arguments);\n  },\n  transform: function (transform, origin) {\n    var properties = {};\n    if (origin) properties[vendor + 'transform-origin'] = origin;\n    properties[vendor + 'transform'] = transform;\n    return this.css(properties);\n  },\n  animatef: function (point) {\n    var data = this.data();\n    if (data.effect) clearInterval(data.effect.handle);\n    if (point) {\n      if (!point.to.length) point.to = [point.to];\n      if (!point.from.length) point.from = [point.from];\n      if (!point.easing) point.easing = function (x, t, b, c, data) {\n        return c * Math.sqrt(1 - (t = t / data - 1) * t) + b;\n      };\n      var j,\n        diff = [],\n        len = point.to.length,\n        that = this,\n        fps = point.fps || 30,\n        time = -fps,\n        f = function () {\n          var j,\n            v = [];\n          time = Math.min(point.duration, time + fps);\n          for (j = 0; j < len; j++) v.push(point.easing(1, time, point.from[j], diff[j], point.duration));\n          point.frame(len == 1 ? v[0] : v);\n          if (time == point.duration) {\n            clearInterval(data.effect.handle);\n            delete data['effect'];\n            that.data(data);\n            if (point.complete) point.complete();\n          }\n        };\n      for (j = 0; j < len; j++) diff.push(point.to[j] - point.from[j]);\n      data.effect = point;\n      data.effect.handle = setInterval(f, fps);\n      this.data(data);\n      f();\n    } else {\n      delete data['effect'];\n    }\n  }\n});\n$.isTouch = isTouch;","map":{"version":3,"names":["$","require","has3d","vendor","PI","Math","A90","isTouch","window","events","start","move","end","corners","backward","forward","all","displays","turnOptions","page","gradients","duration","acceleration","display","when","flipOptions","folding","cornerSize","pagesInDOM","pagePosition","top","left","right","bottom","divAtt","zIndex","overf","position","bezier","p1","p2","p3","p4","t","mum1","mum13","mu3","point2D","round","x","y","rad","degrees","deg","radians","translate","use3d","rotate","has","property","object","Object","prototype","hasOwnProperty","call","getPrefix","vendorPrefixes","len","length","document","body","style","toLowerCase","gradient","obj","p0","colors","numColors","j","cols","push","css","join","width","height","dx","dy","angle","atan2","angle2","diagonal","abs","sin","cos","gradientDiagonal","sqrt","corner","slope","tan","inverse","c","segA","pow","turnMethods","init","opts","undefined","i","data","ch","children","extend","pageObjs","pages","pageWrap","pagePlace","pageMv","totalPages","bind","turn","transform","e","flipMethods","_eventStart","_eventMove","_eventEnd","done","addPage","element","incPages","lastPage","Error","_movePages","addClass","_addPage","_removeFromDOM","_necessPage","pageWidth","pageHeight","overflow","append","prepend","_setPageLoc","_makeFlip","remove","hasPage","single","even","flip","next","backGradient","frontGradient","disabled","_pressed","_released","_start","_end","_flip","_makeRange","range","remainingPages","tpage","view","_view","floor","min","max","_removePageFromDOM","dd","f","fwrapper","removePage","from","change","odd","removeClass","attr","currentDisplay","inArray","appendTo","size","animating","disable","bool","resize","_removeMv","splice","_addMv","stop","ok","_moveFoldingPage","force","_fitPage","newView","trigger","_turnPage","current","parseInt","pop","previous","shift","_addMotionPage","event","Event","stopPropagation","isDefaultPrevented","preventDefault","charAt","turned","that","time","Date","getTime","point","calculateZ","mv","nextPage","placePage","dpage","currentPage","r","pageZ","partZ","pageV","addView","update","apage","pos","pageLocation","_addPageWrapper","setData","d","options","z","parent","_cAllowed","_cornerActivated","originalEvent","touches","offset","pageX","pageY","csz","allowedCorners","_c","tl","tr","bl","br","_c2","_foldingPage","_backGradient","bshadow","full","wrapper","fpage","ashadow","is","fparent","att","hide","flips","cursor","_fold","a","alpha","beta","px","gradientEndPointA","gradientEndPointB","gradientStartV","gradientSize","gradientOpacity","df","ac","h","o","substr","compute","rel","middle","gamma","distance","side","sideX","sideY","endingPoint","far","mvW","mvH","v","aliasingFk","backParent","_showFoldedPage","animate","animatef","to","frame","effect","turning","show","hideFoldedPage","delta","np","complete","hiding","turnPage","elevation","moving","isTurning","origin","cla","methods","args","apply","toString","Array","slice","fn","req","arguments","properties","clearInterval","handle","easing","b","diff","fps","setInterval"],"sources":["D:/myportfolio/myportfolio/node_modules/turn.js/index.js"],"sourcesContent":["var $ = require('jquery');\n\nvar has3d,\n\n\tvendor ='',\n\n\tPI = Math.PI,\n\n\tA90 = PI/2,\n\n\tisTouch = 'ontouchstart' in window,\n\n\tevents = (isTouch) ? {start: 'touchstart', move: 'touchmove', end: 'touchend'}\n\t\t\t: {start: 'mousedown', move: 'mousemove', end: 'mouseup'},\n\n\t// Contansts used for each corner\n\t// tl * tr\n\t// *     *\n\t// bl * br\n\n\tcorners = {\n\t\tbackward: ['bl', 'tl'],\n\t\tforward: ['br', 'tr'],\n\t\tall: ['tl', 'bl', 'tr', 'br']\n\t},\n\n\tdisplays = ['single', 'double'],\n\n\t// Default options\n\n\tturnOptions = {\n\n\t\t// First page\n\n\t\tpage: 1,\n\n\t\t// Enables gradients\n\n\t\tgradients: true,\n\n\t\t// Duration of transition in milliseconds\n\n\t\tduration: 600,\n\n\t\t// Enables hardware acceleration\n\n\t\tacceleration: true,\n\n\t\t// Display\n\n\t\tdisplay: 'double',\n\n\t\t// Events\n\n\t\twhen: null\n\t},\n\n\tflipOptions = {\n\n\t\t// Back page\n\n\t\tfolding: null,\n\n\t\t// Corners\n\t\t// backward: Activates both tl and bl corners\n\t\t// forward: Activates both tr and br corners\n\t\t// all: Activates all the corners\n\n\t\tcorners: 'forward',\n\n\t\t// Size of the active zone of each corner\n\n\t\tcornerSize: 100,\n\n\t\t// Enables gradients\n\n\t\tgradients: true,\n\n\t\t// Duration of transition in milliseconds\n\n\t\tduration: 600,\n\n\t\t// Enables hardware acceleration\n\n\t\tacceleration: true\n\t},\n\n\t// Number of pages in the DOM, minimum value: 6\n\n\tpagesInDOM = 6,\n\n\tpagePosition = {0: {top: 0, left: 0, right: 'auto', bottom: 'auto'},\n\t\t\t\t\t1: {top: 0, right: 0, left: 'auto', bottom: 'auto'}},\n\n\t// Gets basic attributes for a layer\n\n\tdivAtt = function(top, left, zIndex, overf) {\n\t\treturn {'css': {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: top,\n\t\t\t\t\tleft: left,\n\t\t\t\t\t'overflow': overf || 'hidden',\n\t\t\t\t\t'z-index': zIndex || 'auto'\n\t\t\t\t\t}\n\t\t\t};\n\t},\n\n\t// Gets a 2D point from a bezier curve of four points\n\n\tbezier = function(p1, p2, p3, p4, t) {\n\t\tvar mum1 = 1 - t,\n\t\t\tmum13 = mum1 * mum1 * mum1,\n\t\t\tmu3 = t * t * t;\n\n\t\treturn point2D(Math.round(mum13*p1.x + 3*t*mum1*mum1*p2.x + 3*t*t*mum1*p3.x + mu3*p4.x),\n\t\t\t\t\t\tMath.round(mum13*p1.y + 3*t*mum1*mum1*p2.y + 3*t*t*mum1*p3.y + mu3*p4.y));\n\t},\n\n\t// Converts an angle from degrees to radians\n\n\trad = function(degrees) {\n\t\treturn degrees/180*PI;\n\t},\n\n\t// Converts an angle from radians to degrees\n\n\tdeg = function(radians) {\n\t\treturn radians/PI*180;\n\t},\n\n\t// Gets a 2D point\n\n\tpoint2D = function(x, y) {\n\t\treturn {x: x, y: y};\n\t},\n\n\t// Returns the traslate value\n\n\ttranslate = function(x, y, use3d) {\n\t\treturn (has3d && use3d) ? ' translate3d(' + x + 'px,' + y + 'px, 0px) ' : ' translate(' + x + 'px, ' + y + 'px) ';\n\t},\n\n\t// Returns the rotation value\n\n\trotate = function(degrees) {\n\t\treturn ' rotate(' + degrees + 'deg) ';\n\t},\n\n\t// Checks if a property belongs to an object\n\n\thas = function(property, object) {\n\t\treturn Object.prototype.hasOwnProperty.call(object, property);\n\t},\n\n\t// Gets the CSS3 vendor prefix\n\n\tgetPrefix = function() {\n\t\tvar vendorPrefixes = ['Moz','Webkit','Khtml','O','ms'],\n\t\t\tlen = vendorPrefixes.length,\n\t\t\tvendor = '';\n\n\t\twhile (len--)\n\t\t\tif ((vendorPrefixes[len] + 'Transform') in document.body.style)\n\t\t\t\tvendor='-'+vendorPrefixes[len].toLowerCase()+'-';\n\n\t\treturn vendor;\n\t},\n\n\t// Adds gradients\n\n\tgradient = function(obj, p0, p1, colors, numColors) {\n\n\t\tvar j, cols = [];\n\n\t\tif (vendor=='-webkit-') {\n\n\t\t\tfor (j = 0; j<numColors; j++)\n\t\t\t\t\tcols.push('color-stop('+colors[j][0]+', '+colors[j][1]+')');\n\n\t\t\tobj.css({'background-image': '-webkit-gradient(linear, '+p0.x+'% '+p0.y+'%,  '+p1.x+'% '+p1.y+'%, '+ cols.join(',') +' )'});\n\n\t\t} else {\n\n\t\t\t// This procedure makes the gradients for non-webkit browsers\n\t\t\t// It will be reduced to one unique way for gradients in next versions\n\n\t\t\tp0 = {x:p0.x/100 * obj.width(), y:p0.y/100 * obj.height()};\n\t\t\tp1 = {x:p1.x/100 * obj.width(), y:p1.y/100 * obj.height()};\n\n\t\t\tvar dx = p1.x-p0.x,\n\t\t\t\tdy = p1.y-p0.y,\n\t\t\t\tangle = Math.atan2(dy, dx),\n\t\t\t\tangle2 = angle - Math.PI/2,\n\t\t\t\tdiagonal = Math.abs(obj.width()*Math.sin(angle2)) + Math.abs(obj.height()*Math.cos(angle2)),\n\t\t\t\tgradientDiagonal = Math.sqrt(dy*dy + dx*dx),\n\t\t\t\tcorner = point2D((p1.x<p0.x) ? obj.width() : 0, (p1.y<p0.y) ? obj.height() : 0),\n\t\t\t\tslope = Math.tan(angle),\n\t\t\t\tinverse = -1/slope,\n\t\t\t\tx = (inverse*corner.x - corner.y - slope*p0.x + p0.y) / (inverse-slope),\n\t\t\t\tc = {x: x, y: inverse*x - inverse*corner.x + corner.y},\n\t\t\t\tsegA = (Math.sqrt( Math.pow(c.x-p0.x,2) + Math.pow(c.y-p0.y,2)));\n\n\t\t\t\tfor (j = 0; j<numColors; j++)\n\t\t\t\t\tcols.push(' '+colors[j][1]+' '+(( segA + gradientDiagonal*colors[j][0] )*100/diagonal)+'%');\n\n\t\t\t\tobj.css({'background-image': vendor+'linear-gradient(' + (-angle) + 'rad,' + cols.join(',') + ')'});\n\t\t}\n\t},\n\nturnMethods = {\n\n\t// Singleton constructor\n\t// $('#selector').turn([options]);\n\n\tinit: function(opts) {\n\n\t\t// Define constants\n\t\tif (has3d===undefined) {\n\t\t\thas3d = 'WebKitCSSMatrix' in window || 'MozPerspective' in document.body.style;\n\t\t\tvendor = getPrefix();\n\t\t}\n\n\t\tvar i, data = this.data(), ch = this.children();\n\n\t\topts = $.extend({width: this.width(), height: this.height()}, turnOptions, opts);\n\t\tdata.opts = opts;\n\t\tdata.pageObjs = {};\n\t\tdata.pages = {};\n\t\tdata.pageWrap = {};\n\t\tdata.pagePlace = {};\n\t\tdata.pageMv = [];\n\t\tdata.totalPages = opts.pages || 0;\n\n\t\tif (opts.when)\n\t\t\tfor (i in opts.when)\n\t\t\t\tif (has(i, opts.when))\n\t\t\t\t\tthis.bind(i, opts.when[i]);\n\n\n\t\tthis.css({position: 'relative', width: opts.width, height: opts.height});\n\n\t\tthis.turn('display', opts.display);\n\n\t\tif (has3d && !isTouch && opts.acceleration)\n\t\t\tthis.transform(translate(0, 0, true));\n\n\t\tfor (i = 0; i<ch.length; i++)\n\t\t\tthis.turn('addPage', ch[i], i+1);\n\n\t\tthis.turn('page', opts.page);\n\n        // allow setting active corners as an option\n        corners = $.extend({}, corners, opts.corners);\n\n\t\t// Event listeners\n\n\t\t$(this).bind(events.start, function(e) {\n\t\t\tfor (var page in data.pages)\n\t\t\t\tif (has(page, data.pages) && flipMethods._eventStart.call(data.pages[page], e)===false)\n\t\t\t\t\treturn false;\n\t\t});\n\n\t\t$(document).bind(events.move, function(e) {\n\t\t\tfor (var page in data.pages)\n\t\t\t\tif (has(page, data.pages))\n\t\t\t\t\tflipMethods._eventMove.call(data.pages[page], e);\n\t\t}).\n\t\tbind(events.end, function(e) {\n\t\t\tfor (var page in data.pages)\n\t\t\t\tif (has(page, data.pages))\n\t\t\t\t\tflipMethods._eventEnd.call(data.pages[page], e);\n\n\t\t});\n\n\t\tdata.done = true;\n\n\t\treturn this;\n\t},\n\n\t// Adds a page from external data\n\n\taddPage: function(element, page) {\n\n\t\tvar incPages = false,\n\t\t\tdata = this.data(),\n\t\t\tlastPage = data.totalPages+1;\n\n\t\tif (page) {\n\t\t\tif (page==lastPage) {\n\t\t\t\tpage = lastPage;\n\t\t\t\tincPages = true;\n\t\t\t} else if (page>lastPage)\n\t\t\t\tthrow new Error ('It is impossible to add the page \"'+page+'\", the maximum value is: \"'+lastPage+'\"');\n\n\t\t} else {\n\t\t\tpage = lastPage;\n\t\t\tincPages = true;\n\t\t}\n\n\t\tif (page>=1 && page<=lastPage) {\n\n\t\t\t// Stop animations\n\t\t\tif (data.done) this.turn('stop');\n\n\t\t\t// Move pages if it's necessary\n\t\t\tif (page in data.pageObjs)\n\t\t\t\tturnMethods._movePages.call(this, page, 1);\n\n\t\t\t// Update number of pages\n\t\t\tif (incPages)\n\t\t\t\tdata.totalPages = lastPage;\n\n\t\t\t// Add element\n\t\t\tdata.pageObjs[page] = $(element).addClass('turn-page p' + page);\n\n\t\t\t// Add page\n\t\t\tturnMethods._addPage.call(this, page);\n\n\t\t\t// Update view\n\t\t\tif (data.done)\n\t\t\t\tthis.turn('update');\n\n\t\t\tturnMethods._removeFromDOM.call(this);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// Adds a page from internal data\n\n\t_addPage: function(page) {\n\n\t\tvar data = this.data(),\n\t\t\telement = data.pageObjs[page];\n\n\t\tif (element)\n\t\t\tif (turnMethods._necessPage.call(this, page)) {\n\n\t\t\t\tif (!data.pageWrap[page]) {\n\n\t\t\t\t\tvar pageWidth = (data.display=='double') ? this.width()/2 : this.width(),\n\t\t\t\t\t\tpageHeight = this.height();\n\n\t\t\t\t\telement.css({width:pageWidth, height:pageHeight});\n\n\t\t\t\t\t// Place\n\t\t\t\t\tdata.pagePlace[page] = page;\n\n\t\t\t\t\t// Wrapper\n\t\t\t\t\tdata.pageWrap[page] = $('<div/>', {'class': 'turn-page-wrapper',\n\t\t\t\t\t\t\t\t\t\t\t\t\tpage: page,\n\t\t\t\t\t\t\t\t\t\t\t\t\tcss: {position: 'absolute',\n\t\t\t\t\t\t\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: pageWidth,\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: pageHeight}}).\n\t\t\t\t\t\t\t\t\t\t\t\t\tcss(pagePosition[(data.display=='double') ? page%2 : 0]);\n\n\t\t\t\t\t// Append to this\n\t\t\t\t\tthis.append(data.pageWrap[page]);\n\n\t\t\t\t\t// Move data.pageObjs[page] (element) to wrapper\n\t\t\t\t\tdata.pageWrap[page].prepend(data.pageObjs[page]);\n\t\t\t\t}\n\n\t\t\t\t// If the page is in the current view, create the flip effect\n\t\t\t\tif (!page || turnMethods._setPageLoc.call(this, page)==1)\n\t\t\t\t\tturnMethods._makeFlip.call(this, page);\n\n\t\t\t} else {\n\n\t\t\t\t// Place\n\t\t\t\tdata.pagePlace[page] = 0;\n\n\t\t\t\t// Remove element from the DOM\n\t\t\t\tif (data.pageObjs[page])\n\t\t\t\t\tdata.pageObjs[page].remove();\n\n\t\t\t}\n\n\t},\n\n\t// Checks if a page is in memory\n\n\thasPage: function(page) {\n\n\t\treturn page in this.data().pageObjs;\n\n\t},\n\n\t// Prepares the flip effect for a page\n\n\t_makeFlip: function(page) {\n\n\t\tvar data = this.data();\n\n\t\tif (!data.pages[page] && data.pagePlace[page]==page) {\n\n\t\t\tvar single = data.display=='single',\n\t\t\t\teven = page%2;\n\n\t\t\tdata.pages[page] = data.pageObjs[page].\n\t\t\t\t\t\t\t\tcss({width: (single) ? this.width() : this.width()/2, height: this.height()}).\n\t\t\t\t\t\t\t\tflip({page: page,\n\t\t\t\t\t\t\t\t\tnext: (single && page === data.totalPages) ? page -1 : ((even || single) ? page+1 : page-1),\n\t\t\t\t\t\t\t\t\tturn: this,\n\t\t\t\t\t\t\t\t\tduration: data.opts.duration,\n\t\t\t\t\t\t\t\t\tacceleration : data.opts.acceleration,\n\t\t\t\t\t\t\t\t\tcorners: (single) ? 'all' : ((even) ? 'forward' : 'backward'),\n\t\t\t\t\t\t\t\t\tbackGradient: data.opts.gradients,\n\t\t\t\t\t\t\t\t\tfrontGradient: data.opts.gradients\n\t\t\t\t\t\t\t\t\t}).\n\t\t\t\t\t\t\t\t\tflip('disable', data.disabled).\n\t\t\t\t\t\t\t\t\tbind('pressed', turnMethods._pressed).\n\t\t\t\t\t\t\t\t\tbind('released', turnMethods._released).\n\t\t\t\t\t\t\t\t\tbind('start', turnMethods._start).\n\t\t\t\t\t\t\t\t\tbind('end', turnMethods._end).\n\t\t\t\t\t\t\t\t\tbind('flip', turnMethods._flip);\n\t\t}\n\t\treturn data.pages[page];\n\t},\n\n\t// Makes pages within a range\n\n\t_makeRange: function() {\n\n\t\tvar page,\n\t\t\tdata = this.data(),\n\t\t\trange = this.turn('range');\n\n\t\t\tfor (page = range[0]; page<=range[1]; page++)\n\t\t\t\tturnMethods._addPage.call(this, page);\n\n\t},\n\n\t// Returns a range of `pagesInDOM` pages that should be in the DOM\n\t// Example:\n\t// - page of the current view, return true\n\t// * page is in the range, return true\n\t// 0 page is not in the range, return false\n\t//\n\t// 1 2-3 4-5 6-7 8-9 10-11 12-13\n\t//    **  **  --   **  **\n\n\trange: function(page) {\n\n\t\tvar remainingPages, left, right,\n\t\t\tdata = this.data();\n\t\t\tpage = page || data.tpage || data.page;\n\t\t\tvar view = turnMethods._view.call(this, page);\n\n\t\t\tif (page<1 || page>data.totalPages)\n\t\t\t\tthrow new Error ('\"'+page+'\" is not a page for range');\n\n\t\t\tview[1] = view[1] || view[0];\n\n\t\t\tif (view[0]>=1 && view[1]<=data.totalPages) {\n\n\t\t\t\tremainingPages = Math.floor((pagesInDOM-2)/2);\n\n\t\t\t\tif (data.totalPages-view[1] > view[0]) {\n\t\t\t\t\tleft = Math.min(view[0]-1, remainingPages);\n\t\t\t\t\tright = 2*remainingPages-left;\n\t\t\t\t} else {\n\t\t\t\t\tright = Math.min(data.totalPages-view[1], remainingPages);\n\t\t\t\t\tleft = 2*remainingPages-right;\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tleft = pagesInDOM-1;\n\t\t\t\tright = pagesInDOM-1;\n\t\t\t}\n\n\t\t\treturn [Math.max(1, view[0]-left), Math.min(data.totalPages, view[1]+right)];\n\n\t},\n\n\t// Detects if a page is within the range of `pagesInDOM` from the current view\n\n\t_necessPage: function(page) {\n\n\t\tif (page===0)\n\t\t\treturn true;\n\n\t\tvar range = this.turn('range');\n\n\t\treturn page>=range[0] && page<=range[1];\n\n\t},\n\n\t// Releases memory by removing pages from the DOM\n\n\t_removeFromDOM: function() {\n\n\t\tvar page, data = this.data();\n\n\t\tfor (page in data.pageWrap)\n\t\t\tif (has(page, data.pageWrap) && !turnMethods._necessPage.call(this, page))\n\t\t\t\tturnMethods._removePageFromDOM.call(this, page);\n\n\n\t},\n\n\t// Removes a page from DOM and its internal references\n\n\t_removePageFromDOM: function(page) {\n\n\t\tvar data = this.data();\n\n\t\tif (data.pages[page]) {\n\t\t\tvar dd = data.pages[page].data();\n\t\t\tif (dd.f && dd.f.fwrapper)\n\t\t\t\tdd.f.fwrapper.remove();\n\t\t\tdata.pages[page].remove();\n\t\t\tdelete data.pages[page];\n\t\t}\n\n\t\tif (data.pageObjs[page])\n\t\t\tdata.pageObjs[page].remove();\n\n\t\tif (data.pageWrap[page]) {\n\t\t\tdata.pageWrap[page].remove();\n\t\t\tdelete data.pageWrap[page];\n\t\t}\n\n\t\tdelete data.pagePlace[page];\n\n\t},\n\n\t// Removes a page\n\n\tremovePage: function(page) {\n\n\t\tvar data = this.data();\n\n\t\tif (data.pageObjs[page]) {\n\t\t\t// Stop animations\n\t\t\tthis.turn('stop');\n\n\t\t\t// Remove `page`\n\t\t\tturnMethods._removePageFromDOM.call(this, page);\n\t\t\tdelete data.pageObjs[page];\n\n\t\t\t// Move the pages behind `page`\n\t\t\tturnMethods._movePages.call(this, page, -1);\n\n\t\t\t// Resize the size of this magazine\n\t\t\tdata.totalPages = data.totalPages-1;\n\t\t\tturnMethods._makeRange.call(this);\n\n\t\t\t// Check the current view\n\t\t\tif (data.page>data.totalPages)\n\t\t\t\tthis.turn('page', data.totalPages);\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Moves pages\n\n\t_movePages: function(from, change) {\n\n\t\tvar page,\n\t\t\tdata = this.data(),\n\t\t\tsingle = data.display=='single',\n\t\t\tmove = function(page) {\n\n\t\t\t\tvar next = page + change,\n\t\t\t\t\todd = next%2;\n\n\t\t\t\tif (data.pageObjs[page])\n\t\t\t\t\tdata.pageObjs[next] = data.pageObjs[page].removeClass('page' + page).addClass('page' + next);\n\n\t\t\t\tif (data.pagePlace[page] && data.pageWrap[page]) {\n\t\t\t\t\tdata.pagePlace[next] = next;\n\t\t\t\t\tdata.pageWrap[next] = data.pageWrap[page].css(pagePosition[(single) ? 0 : odd]).attr('page', next);\n\n\t\t\t\t\tif (data.pages[page])\n\t\t\t\t\t\tdata.pages[next] = data.pages[page].flip('options', {\n\t\t\t\t\t\t\tpage: next,\n\t\t\t\t\t\t\tnext: (single || odd) ? next+1 : next-1,\n\t\t\t\t\t\t\tcorners: (single) ? 'all' : ((odd) ? 'forward' : 'backward')\n\t\t\t\t\t\t});\n\n\t\t\t\t\tif (change) {\n\t\t\t\t\t\tdelete data.pages[page];\n\t\t\t\t\t\tdelete data.pagePlace[page];\n\t\t\t\t\t\tdelete data.pageObjs[page];\n\t\t\t\t\t\tdelete data.pageWrap[page];\n\t\t\t\t\t\tdelete data.pageObjs[page];\n\t\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tif (change>0)\n\t\t\tfor (page=data.totalPages; page>=from; page--) move(page);\n\t\telse\n\t\t\tfor (page=from; page<=data.totalPages; page++) move(page);\n\n\t},\n\n\t// Sets or Gets the display mode\n\n\tdisplay: function(display) {\n\n\t\tvar data = this.data(),\n\t\t\tcurrentDisplay = data.display;\n\n\t\tif (display) {\n\n\t\t\tif ($.inArray(display, displays)==-1)\n\t\t\t\tthrow new Error ('\"'+display + '\" is not a value for display');\n\n\t\t\tif (display=='single') {\n\t\t\t\tif (!data.pageObjs[0]) {\n\t\t\t\t\tthis.turn('stop').\n\t\t\t\t\t\tcss({'overflow': 'hidden'});\n\t\t\t\t\tdata.pageObjs[0] = $('<div />', {'class': 'turn-page p-temporal'}).\n\t\t\t\t\t\t\t\t\tcss({width: this.width(), height: this.height()}).\n\t\t\t\t\t\t\t\t\t\tappendTo(this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (data.pageObjs[0]) {\n\t\t\t\t\tthis.turn('stop').\n\t\t\t\t\t\tcss({'overflow': ''});\n\t\t\t\t\tdata.pageObjs[0].remove();\n\t\t\t\t\tdelete data.pageObjs[0];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata.display = display;\n\n\t\t\tif (currentDisplay) {\n\t\t\t\tvar size = this.turn('size');\n\t\t\t\tturnMethods._movePages.call(this, 1, 0);\n\t\t\t\tthis.turn('size', size.width, size.height).\n\t\t\t\t\t\tturn('update');\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t} else\n\t\t\treturn currentDisplay;\n\n\t},\n\n\t// Detects if the pages are being animated\n\n\tanimating: function() {\n\n\t\treturn this.data().pageMv.length>0;\n\n\t},\n\n\t// Disables and enables the effect\n\n\tdisable: function(bool) {\n\n\t\tvar page,\n\t\t\tdata = this.data(),\n\t\t\tview = this.turn('view');\n\n\t\t\tdata.disabled = bool===undefined || bool===true;\n\n\t\tfor (page in data.pages)\n\t\t\tif (has(page, data.pages))\n\t\t\t\tdata.pages[page].flip('disable', bool ? $.inArray(page, view) : false );\n\n\t\treturn this;\n\n\t},\n\n\t// Gets and sets the size\n\n\tsize: function(width, height) {\n\n\t\tif (width && height) {\n\n\t\t\tvar data = this.data(), pageWidth = (data.display=='double') ? width/2 : width, page;\n\n\t\t\tthis.css({width: width, height: height});\n\n\t\t\tif (data.pageObjs[0])\n\t\t\t\tdata.pageObjs[0].css({width: pageWidth, height: height});\n\n\t\t\tfor (page in data.pageWrap) {\n\t\t\t\tif (!has(page, data.pageWrap)) continue;\n\t\t\t\tdata.pageObjs[page].css({width: pageWidth, height: height});\n\t\t\t\tdata.pageWrap[page].css({width: pageWidth, height: height});\n\t\t\t\tif (data.pages[page])\n\t\t\t\t\tdata.pages[page].css({width: pageWidth, height: height});\n\t\t\t}\n\n\t\t\tthis.turn('resize');\n\n\t\t\treturn this;\n\n\t\t} else {\n\n\t\t\treturn {width: this.width(), height: this.height()};\n\n\t\t}\n\t},\n\n\t// Resizes each page\n\n\tresize: function() {\n\n\t\tvar page, data = this.data();\n\n\t\tif (data.pages[0]) {\n\t\t\tdata.pageWrap[0].css({left: -this.width()});\n\t\t\tdata.pages[0].flip('resize', true);\n\t\t}\n\n\t\tfor (page = 1; page <= data.totalPages; page++)\n\t\t\tif (data.pages[page])\n\t\t\t\tdata.pages[page].flip('resize', true);\n\n\n\t},\n\n\t// Removes an animation from the cache\n\n\t_removeMv: function(page) {\n\n\t\tvar i, data = this.data();\n\n\t\tfor (i=0; i<data.pageMv.length; i++)\n\t\t\tif (data.pageMv[i]==page) {\n\t\t\t\tdata.pageMv.splice(i, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\treturn false;\n\n\t},\n\n\t// Adds an animation to the cache\n\n\t_addMv: function(page) {\n\n\t\tvar data = this.data();\n\n\t\tturnMethods._removeMv.call(this, page);\n\t\tdata.pageMv.push(page);\n\n\t},\n\n\t// Gets indexes for a view\n\n\t_view: function(page) {\n\n\t\tvar data = this.data();\n\t\tpage = page || data.page;\n\n\t\tif (data.display=='double')\n\t\t\treturn (page%2) ? [page-1, page] : [page, page+1];\n\t\telse\n\t\t\treturn [page];\n\n\t},\n\n\t// Gets a view\n\n\tview: function(page) {\n\n\t\tvar data = this.data(), view = turnMethods._view.call(this, page);\n\n\t\treturn (data.display=='double') ? [(view[0]>0) ? view[0] : 0, (view[1]<=data.totalPages) ? view[1] : 0]\n\t\t\t\t: [(view[0]>0 && view[0]<=data.totalPages) ? view[0] : 0];\n\n\t},\n\n\t// Stops animations\n\n\tstop: function(ok) {\n\n\t\tvar i, opts, data = this.data(), pages = data.pageMv;\n\n\t\tdata.pageMv = [];\n\n\t\tif (data.tpage) {\n\t\t\tdata.page = data.tpage;\n\t\t\tdelete data['tpage'];\n\t\t}\n\n\t\tfor (i in pages) {\n\t\t\tif (!has(i, pages)) continue;\n\t\t\topts = data.pages[pages[i]].data().f.opts;\n\t\t\tflipMethods._moveFoldingPage.call(data.pages[pages[i]], null);\n\t\t\tdata.pages[pages[i]].flip('hideFoldedPage');\n\t\t\tdata.pagePlace[opts.next] = opts.next;\n\n\t\t\tif (opts.force) {\n\t\t\t\topts.next = (opts.page%2===0) ? opts.page-1 : opts.page+1;\n\t\t\t\tdelete opts['force'];\n\t\t\t}\n\n\t\t}\n\n\t\tthis.turn('update');\n\n\t\treturn this;\n\t},\n\n\t// Gets and sets the number of pages\n\n\tpages: function(pages) {\n\n\t\tvar data = this.data();\n\n\t\tif (pages) {\n\t\t\tif (pages<data.totalPages) {\n\n\t\t\t\tfor (var page = pages+1; page<=data.totalPages; page++)\n\t\t\t\t\tthis.turn('removePage', page);\n\n\t\t\t\tif (this.turn('page')>pages)\n\t\t\t\t\tthis.turn('page', pages);\n\t\t\t}\n\n\t\t\tdata.totalPages = pages;\n\n\t\t\treturn this;\n\t\t} else\n\t\t\treturn data.totalPages;\n\n\t},\n\n\t// Sets a page without effect\n\n\t_fitPage: function(page, ok) {\n\n\t\tvar data = this.data(), newView = this.turn('view', page);\n\n\t\tif (data.page!=page) {\n\t\t\tthis.trigger('turning', [page, newView]);\n\t\t\tif ($.inArray(1, newView)!=-1) this.trigger('first');\n\t\t\tif ($.inArray(data.totalPages, newView)!=-1) this.trigger('last');\n\t\t}\n\n\t\tif (!data.pageObjs[page])\n\t\t\treturn;\n\n\t\tdata.tpage = page;\n\n\t\tthis.turn('stop', ok);\n\t\tturnMethods._removeFromDOM.call(this);\n\t\tturnMethods._makeRange.call(this);\n\t\tthis.trigger('turned', [page, newView]);\n\n\t},\n\n\t// Turns to a page\n\n\t_turnPage: function(page) {\n\n\t\tvar current, next,\n\t\t\tdata = this.data(),\n\t\t\tview = this.turn('view'),\n\t\t\tnewView = this.turn('view', page);\n\n\t\tif (data.page!=page) {\n\t\t\tthis.trigger('turning', [page, newView]);\n\t\t\tif ($.inArray(1, newView)!=-1) this.trigger('first');\n\t\t\tif ($.inArray(data.totalPages, newView)!=-1) this.trigger('last');\n\t\t}\n\n\t\tif (!data.pageObjs[page])\n\t\t\treturn;\n\n\t\tdata.tpage = page;\n\n\t\tthis.turn('stop');\n\n\t\tturnMethods._makeRange.call(this);\n\n\t\tif (data.display=='single') {\n\t\t\tcurrent = view[0];\n\t\t\tnext = newView[0];\n\t\t} else if (view[1] && page>view[1]) {\n\t\t\tcurrent = view[1];\n\t\t\tnext = newView[0];\n\t\t} else if (view[0] && page<view[0]) {\n\t\t\tcurrent = view[0];\n\t\t\tnext = newView[1];\n\t\t}\n\n\t\tif (data.pages[current]) {\n\n\t\t\tvar opts = data.pages[current].data().f.opts;\n\t\t\tdata.tpage = next;\n\n\t\t\tif (opts.next!=next) {\n\t\t\t\topts.next = next;\n\t\t\t\tdata.pagePlace[next] = opts.page;\n\t\t\t\topts.force = true;\n\t\t\t}\n\n\t\t\tif (data.display=='single')\n\t\t\t\tdata.pages[current].flip('turnPage', (newView[0] > view[0]) ? 'br' : 'bl');\n\t\t\telse\n\t\t\t\tdata.pages[current].flip('turnPage');\n\t\t}\n\n\t},\n\n\t// Gets and sets a page\n\n\tpage: function(page) {\n\n\t\tpage = parseInt(page, 10);\n\n\t\tvar data = this.data();\n\n\t\tif (page>0 && page<=data.totalPages) {\n\t\t\tif (!data.done || $.inArray(page, this.turn('view'))!=-1)\n\t\t\t\tturnMethods._fitPage.call(this, page);\n\t\t\telse\n\t\t\t\tturnMethods._turnPage.call(this, page);\n\n\t\t\treturn this;\n\n\t\t} else\n\t\t\treturn data.page;\n\n\t},\n\n\t// Turns to the next view\n\n\tnext: function() {\n\n\t\tvar data = this.data();\n\t\treturn this.turn('page', turnMethods._view.call(this, data.page).pop() + 1);\n\n\t},\n\n\t// Turns to the previous view\n\n\tprevious: function() {\n\n\t\tvar data = this.data();\n\t\treturn this.turn('page', turnMethods._view.call(this, data.page).shift() - 1);\n\n\t},\n\n\t// Adds a motion to the internal list\n\n\t_addMotionPage: function() {\n\n\t\tvar opts = $(this).data().f.opts,\n\t\t\tturn = opts.turn,\n\t\t\tdd = turn.data();\n\n\t\topts.pageMv = opts.page;\n\t\tturnMethods._addMv.call(turn, opts.pageMv);\n\t\tdd.pagePlace[opts.next] = opts.page;\n\t\tturn.turn('update');\n\n\t},\n\n\t// This event is called in context of flip\n\n\t_start: function(e, opts, corner) {\n\n\t\t\tvar data = opts.turn.data(),\n\t\t\t\tevent = $.Event('start');\n\n\t\t\te.stopPropagation();\n\n\t\t\topts.turn.trigger(event, [opts, corner]);\n\n\t\t\tif (event.isDefaultPrevented()) {\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\tif (data.display=='single') {\n\n\t\t\tvar left = corner.charAt(1)=='l';\n\t\t\tif ((opts.page==1 && left) || (opts.page==data.totalPages && !left))\n\t\t\t\te.preventDefault();\n\t\t\telse {\n\t\t\t\tif (left) {\n\t\t\t\t\topts.next = (opts.next<opts.page) ? opts.next : opts.page-1;\n\t\t\t\t\topts.force = true;\n\t\t\t\t} else\n\t\t\t\t\topts.next = (opts.next>opts.page) ? opts.next : opts.page+1;\n\t\t\t}\n\n\t\t}\n\n\t\tturnMethods._addMotionPage.call(this);\n\t},\n\n\t// This event is called in context of flip\n\n\t_end: function(e, turned) {\n\n\t\tvar that = $(this),\n\t\t\tdata = that.data().f,\n\t\t\topts = data.opts,\n\t\t\tturn = opts.turn,\n\t\t\tdd = turn.data();\n\n\t\te.stopPropagation();\n\n\t\tif (turned || dd.tpage) {\n\n\t\t\tif (dd.tpage==opts.next || dd.tpage==opts.page) {\n\t\t\t\tdelete dd['tpage'];\n\t\t\t\tturnMethods._fitPage.call(turn, dd.tpage || opts.next, true);\n\t\t\t}\n\n\t\t} else {\n\t\t\tturnMethods._removeMv.call(turn, opts.pageMv);\n\t\t\tturn.turn('update');\n\t\t}\n\n\t},\n\n\t// This event is called in context of flip\n\n\t_pressed: function() {\n\n\t\tvar page,\n\t\t\tthat = $(this),\n\t\t\tdata = that.data().f,\n\t\t\tturn = data.opts.turn,\n\t\t\tpages = turn.data().pages;\n\n\t\tfor (page in pages)\n\t\t\tif (page!=data.opts.page)\n\t\t\t\tpages[page].flip('disable', true);\n\n\t\treturn data.time = new Date().getTime();\n\n\t},\n\n\t// This event is called in context of flip\n\n\t_released: function(e, point) {\n\n\t\tvar that = $(this),\n\t\t\tdata = that.data().f;\n\n\t\t\te.stopPropagation();\n\n\t\tif ((new Date().getTime())-data.time<200 || point.x<0 || point.x>$(this).width()) {\n\t\t\te.preventDefault();\n\t\t\tdata.opts.turn.data().tpage = data.opts.next;\n\t\t\tdata.opts.turn.turn('update');\n\t\t\t$(that).flip('turnPage');\n\t\t}\n\n\t},\n\n\t// This event is called in context of flip\n\n\t_flip: function() {\n\n\t\tvar opts = $(this).data().f.opts;\n\n\t\topts.turn.trigger('turn', [opts.next]);\n\n\t},\n\n\t// Calculate the z-index value for pages during the animation\n\n\tcalculateZ: function(mv) {\n\n\t\tvar i, page, nextPage, placePage, dpage,\n\t\t\tthat = this,\n\t\t\tdata = this.data(),\n\t\t\tview = this.turn('view'),\n\t\t\tcurrentPage = view[0] || view[1],\n\t\t\tr = {pageZ: {}, partZ: {}, pageV: {}},\n\n\t\t\taddView = function(page) {\n\t\t\t\tvar view = that.turn('view', page);\n\t\t\t\tif (view[0]) r.pageV[view[0]] = true;\n\t\t\t\tif (view[1]) r.pageV[view[1]] = true;\n\t\t\t};\n\n\t\t\tfor (i = 0; i<mv.length; i++) {\n\t\t\t\tpage = mv[i];\n\t\t\t\tnextPage = data.pages[page].data().f.opts.next;\n\t\t\t\tplacePage = data.pagePlace[page];\n\t\t\t\taddView(page);\n\t\t\t\taddView(nextPage);\n\t\t\t\tdpage = (data.pagePlace[nextPage]==nextPage) ? nextPage : page;\n\t\t\t\tr.pageZ[dpage] = data.totalPages - Math.abs(currentPage-dpage);\n\t\t\t\tr.partZ[placePage] = data.totalPages*2 + Math.abs(currentPage-dpage);\n\t\t\t}\n\n\t\treturn r;\n\t},\n\n\t// Updates the z-index and display property of every page\n\n\tupdate: function() {\n\n\t\tvar page,\n\t\t\tdata = this.data();\n\n\t\tif (data.pageMv.length && data.pageMv[0]!==0) {\n\n\t\t\t// Update motion\n\n\t\t\tvar apage,\n\t\t\t\tpos = this.turn('calculateZ', data.pageMv),\n\t\t\t\tview = this.turn('view', data.tpage);\n\n\t\t\tif (data.pagePlace[view[0]]==view[0]) apage = view[0];\n\t\t\telse if (data.pagePlace[view[1]]==view[1]) apage = view[1];\n\n\t\t\tfor (page in data.pageWrap) {\n\n\t\t\t\tif (!has(page, data.pageWrap)) continue;\n\n\t\t\t\tdata.pageWrap[page].css({display: (pos.pageV[page]) ? '' : 'none', 'z-index': pos.pageZ[page] || 0});\n\n\t\t\t\tif (data.pages[page]) {\n\t\t\t\t\tdata.pages[page].flip('z', pos.partZ[page] || null);\n\n\t\t\t\t\tif (pos.pageV[page])\n\t\t\t\t\t\tdata.pages[page].flip('resize');\n\n\t\t\t\t\tif (data.tpage)\n\t\t\t\t\t\tdata.pages[page].flip('disable', true); // data.disabled || page!=apage\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Update static pages\n\n\t\t\tfor (page in data.pageWrap) {\n\t\t\t\tif (!has(page, data.pageWrap)) continue;\n\t\t\t\t\tvar pageLocation = turnMethods._setPageLoc.call(this, page);\n\t\t\t\t\tif (data.pages[page])\n\t\t\t\t\t\tdata.pages[page].flip('disable', data.disabled || pageLocation!=1).flip('z', null);\n\t\t\t}\n\t\t}\n\t},\n\n\t// Sets the z-index and display property of a page\n\t// It depends on the current view\n\n\t_setPageLoc: function(page) {\n\n\t\tvar data = this.data(),\n\t\t\tview = this.turn('view');\n\n\t\tif (page==view[0] || page==view[1]) {\n\t\t\tdata.pageWrap[page].css({'z-index': data.totalPages, display: ''});\n\t\t\treturn 1;\n\t\t} else if ((data.display=='single' && page==view[0]+1) || (data.display=='double' && page==view[0]-2 || page==view[1]+2)) {\n\t\t\tdata.pageWrap[page].css({'z-index': data.totalPages-1, display: ''});\n\t\t\treturn 2;\n\t\t} else {\n\t\t\tdata.pageWrap[page].css({'z-index': 0, display: 'none'});\n\t\t\treturn 0;\n\t\t}\n\t}\n},\n\n// Methods and properties for the flip page effect\n\nflipMethods = {\n\n\t// Constructor\n\n\tinit: function(opts) {\n\n\t\tif (opts.gradients) {\n\t\t\topts.frontGradient = true;\n\t\t\topts.backGradient = true;\n\t\t}\n\n\t\tthis.data({f: {}});\n\t\tthis.flip('options', opts);\n\n\t\tflipMethods._addPageWrapper.call(this);\n\n\t\treturn this;\n\t},\n\n\tsetData: function(d) {\n\n\t\tvar data = this.data();\n\n\t\tdata.f = $.extend(data.f, d);\n\n\t\treturn this;\n\t},\n\n\toptions: function(opts) {\n\n\t\tvar data = this.data().f;\n\n\t\tif (opts) {\n\t\t\tflipMethods.setData.call(this, {opts: $.extend({}, data.opts || flipOptions, opts) });\n\t\t\treturn this;\n\t\t} else\n\t\t\treturn data.opts;\n\n\t},\n\n\tz: function(z) {\n\n\t\tvar data = this.data().f;\n\t\tdata.opts['z-index'] = z;\n\t\tdata.fwrapper.css({'z-index': z || parseInt(data.parent.css('z-index'), 10) || 0});\n\n\t\treturn this;\n\t},\n\n\t_cAllowed: function() {\n\n\t\treturn corners[this.data().f.opts.corners] || this.data().f.opts.corners;\n\n\t},\n\n\t_cornerActivated: function(e) {\n\t\tif (e.originalEvent === undefined) {\n\t\t\treturn false;\n\t\t}\n\n\t\te = (isTouch) ? e.originalEvent.touches : [e];\n\n\t\tvar data = this.data().f,\n\t\t\tpos = data.parent.offset(),\n\t\t\twidth = this.width(),\n\t\t\theight = this.height(),\n\t\t\tc = {x: Math.max(0, e[0].pageX-pos.left), y: Math.max(0, e[0].pageY-pos.top)},\n\t\t\tcsz = data.opts.cornerSize,\n\t\t\tallowedCorners = flipMethods._cAllowed.call(this);\n\n\t\t\tif (c.x<=0 || c.y<=0 || c.x>=width || c.y>=height) return false;\n\n\t\t\tif (c.y<csz) c.corner = 't';\n\t\t\telse if (c.y>=height-csz) c.corner = 'b';\n\t\t\telse return false;\n\n\t\t\tif (c.x<=csz) c.corner+= 'l';\n\t\t\telse if (c.x>=width-csz) c.corner+= 'r';\n\t\t\telse return false;\n\n\t\treturn ($.inArray(c.corner, allowedCorners)==-1) ? false : c;\n\n\t},\n\n\t_c: function(corner, opts) {\n\n\t\topts = opts || 0;\n\t\treturn ({tl: point2D(opts, opts),\n\t\t\t\ttr: point2D(this.width()-opts, opts),\n\t\t\t\tbl: point2D(opts, this.height()-opts),\n\t\t\t\tbr: point2D(this.width()-opts, this.height()-opts)})[corner];\n\n\t},\n\n\t_c2: function(corner) {\n\n\t\treturn {tl: point2D(this.width()*2, 0),\n\t\t\t\ttr: point2D(-this.width(), 0),\n\t\t\t\tbl: point2D(this.width()*2, this.height()),\n\t\t\t\tbr: point2D(-this.width(), this.height())}[corner];\n\n\t},\n\n\t_foldingPage: function(corner) {\n\n\t\tvar opts = this.data().f.opts;\n\n\t\tif (opts.folding) return opts.folding;\n\t\telse if(opts.turn) {\n\t\t\tvar data = opts.turn.data();\n\t\t\tif (data.display == 'single')\n\t\t\t\treturn (data.pageObjs[opts.next]) ? data.pageObjs[0] : null;\n\t\t\telse\n\t\t\t\treturn data.pageObjs[opts.next];\n\t\t}\n\n\t},\n\n\t_backGradient: function() {\n\n\t\tvar data =\tthis.data().f,\n\t\t\tturn = data.opts.turn,\n\t\t\tgradient = data.opts.backGradient &&\n\t\t\t\t\t\t(!turn || turn.data().display=='single' || (data.opts.page!=2 && data.opts.page!=turn.data().totalPages-1) );\n\n\n\t\tif (gradient && !data.bshadow)\n\t\t\tdata.bshadow = $('<div/>', divAtt(0, 0, 1)).\n\t\t\t\tcss({'position': '', width: this.width(), height: this.height()}).\n\t\t\t\t\tappendTo(data.parent);\n\n\t\treturn gradient;\n\n\t},\n\n\tresize: function(full) {\n\n\t\tvar data = this.data().f,\n\t\t\twidth = this.width(),\n\t\t\theight = this.height(),\n\t\t\tsize = Math.round(Math.sqrt(Math.pow(width, 2)+Math.pow(height, 2)));\n\n\t\tif (full) {\n\t\t\tdata.wrapper.css({width: size, height: size});\n\t\t\tdata.fwrapper.css({width: size, height: size}).\n\t\t\t\tchildren(':first-child').\n\t\t\t\t\tcss({width: width, height: height});\n\n\t\t\tdata.fpage.css({width: height, height: width});\n\n\t\t\tif (data.opts.frontGradient)\n\t\t\t\tdata.ashadow.css({width: height, height: width});\n\n\t\t\tif (flipMethods._backGradient.call(this))\n\t\t\t\tdata.bshadow.css({width: width, height: height});\n\t\t}\n\n\t\tif (data.parent.is(':visible')) {\n\t\t\tdata.fwrapper.css({top: data.parent.offset().top,\n\t\t\t\tleft: data.parent.offset().left});\n\n\t\t\tif (data.opts.turn)\n\t\t\t\tdata.fparent.css({top: -data.opts.turn.offset().top, left: -data.opts.turn.offset().left});\n\t\t}\n\n\t\tthis.flip('z', data.opts['z-index']);\n\n\t},\n\n\t// Prepares the page by adding a general wrapper and another objects\n\n\t_addPageWrapper: function() {\n\n\t\tvar att,\n\t\t\tdata = this.data().f,\n\t\t\tparent = this.parent();\n\n\t\tif (!data.wrapper) {\n\n\t\t\tvar left = this.css('left'),\n\t\t\t\ttop = this.css('top'),\n\t\t\t\twidth = this.width(),\n\t\t\t\theight = this.height(),\n\t\t\t\tsize = Math.round(Math.sqrt(Math.pow(width, 2)+Math.pow(height, 2)));\n\n\t\t\tdata.parent = parent;\n\t\t\tdata.fparent = (data.opts.turn) ? data.opts.turn.data().fparent : $('#turn-fwrappers');\n\n\t\t\tif (!data.fparent) {\n\t\t\t\tvar fparent = $('<div/>', {css: {'pointer-events': 'none'}}).hide();\n\t\t\t\t\tfparent.data().flips = 0;\n\n\t\t\t\tif (data.opts.turn) {\n\t\t\t\t\tfparent.css(divAtt(-data.opts.turn.offset().top, -data.opts.turn.offset().left, 'auto', 'visible').css).\n\t\t\t\t\t\t\tappendTo(data.opts.turn);\n\n\t\t\t\t\tdata.opts.turn.data().fparent = fparent;\n\t\t\t\t} else {\n\t\t\t\t\tfparent.css(divAtt(0, 0, 'auto', 'visible').css).\n\t\t\t\t\t\tattr('id', 'turn-fwrappers').\n\t\t\t\t\t\t\tappendTo($('body'));\n\t\t\t\t}\n\n\t\t\t\tdata.fparent = fparent;\n\t\t\t}\n\n\t\t\tthis.css({position: 'absolute', top: 0, left: 0, bottom: 'auto', right: 'auto'});\n\n\t\t\tdata.wrapper = $('<div/>', divAtt(0, 0, this.css('z-index'))).\n\t\t\t\t\t\t\t\tappendTo(parent).\n\t\t\t\t\t\t\t\t\tprepend(this);\n\n\t\t\tdata.fwrapper = $('<div/>', divAtt(parent.offset().top, parent.offset().left)).\n\t\t\t\t\t\t\t\thide().\n\t\t\t\t\t\t\t\t\tappendTo(data.fparent);\n\n\t\t\tdata.fpage = $('<div/>', {css: {cursor: 'default'}}).\n\t\t\t\t\tappendTo($('<div/>', divAtt(0, 0, 0, 'visible')).\n\t\t\t\t\t\t\t\tappendTo(data.fwrapper));\n\n\t\t\tif (data.opts.frontGradient)\n\t\t\t\tdata.ashadow = $('<div/>', divAtt(0, 0,  1)).\n\t\t\t\t\tappendTo(data.fpage);\n\n\t\t\t// Save data\n\n\t\t\tflipMethods.setData.call(this, data);\n\n\t\t\t// Set size\n\t\t\tflipMethods.resize.call(this, true);\n\t\t}\n\n\t},\n\n\t// Takes a 2P point from the screen and applies the transformation\n\n\t_fold: function(point) {\n\n\t\tvar that = this,\n\t\t\ta = 0,\n\t\t\talpha = 0,\n\t\t\tbeta,\n\t\t\tpx,\n\t\t\tgradientEndPointA,\n\t\t\tgradientEndPointB,\n\t\t\tgradientStartV,\n\t\t\tgradientSize,\n\t\t\tgradientOpacity,\n\t\t\tmv = point2D(0, 0),\n\t\t\tdf = point2D(0, 0),\n\t\t\ttr = point2D(0, 0),\n\t\t\twidth = this.width(),\n\t\t\theight = this.height(),\n\t\t\tfolding = flipMethods._foldingPage.call(this),\n\t\t\ttan = Math.tan(alpha),\n\t\t\tdata = this.data().f,\n\t\t\tac = data.opts.acceleration,\n\t\t\th = data.wrapper.height(),\n\t\t\to = flipMethods._c.call(this, point.corner),\n\t\t\ttop = point.corner.substr(0, 1) == 't',\n\t\t\tleft = point.corner.substr(1, 1) == 'l',\n\n\t\t\tcompute = function() {\n\t\t\t\tvar rel = point2D((o.x) ? o.x - point.x : point.x, (o.y) ? o.y - point.y : point.y),\n\t\t\t\t\ttan = (Math.atan2(rel.y, rel.x)),\n\t\t\t\t\tmiddle;\n\n\t\t\t\talpha = A90 - tan;\n\t\t\t\ta = deg(alpha);\n\t\t\t\tmiddle = point2D((left) ? width - rel.x/2 : point.x + rel.x/2, rel.y/2);\n\n\t\t\t\tvar gamma = alpha - Math.atan2(middle.y, middle.x),\n\t\t\t\t\tdistance =  Math.max(0, Math.sin(gamma) * Math.sqrt(Math.pow(middle.x, 2) + Math.pow(middle.y, 2)));\n\n\t\t\t\t\ttr = point2D(distance * Math.sin(alpha), distance * Math.cos(alpha));\n\n\t\t\t\t\tif (alpha > A90) {\n\n\t\t\t\t\t\ttr.x = tr.x + Math.abs(tr.y * Math.tan(tan));\n\t\t\t\t\t\ttr.y = 0;\n\n\t\t\t\t\t\tif (Math.round(tr.x*Math.tan(PI-alpha)) < height) {\n\n\t\t\t\t\t\t\tpoint.y = Math.sqrt(Math.pow(height, 2)+2 * middle.x * rel.x);\n\t\t\t\t\t\t\tif (top) point.y =  height - point.y;\n\t\t\t\t\t\t\treturn compute();\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\tif (alpha>A90) {\n\t\t\t\t\tvar beta = PI-alpha, dd = h - height/Math.sin(beta);\n\t\t\t\t\tmv = point2D(Math.round(dd*Math.cos(beta)), Math.round(dd*Math.sin(beta)));\n\t\t\t\t\tif (left) mv.x = - mv.x;\n\t\t\t\t\tif (top) mv.y = - mv.y;\n\t\t\t\t}\n\n\t\t\t\tpx = Math.round(tr.y/Math.tan(alpha) + tr.x);\n\n\t\t\t\tvar side = width - px,\n\t\t\t\t\tsideX = side*Math.cos(alpha*2),\n\t\t\t\t\tsideY = side*Math.sin(alpha*2);\n\t\t\t\t\tdf = point2D(Math.round( (left ? side -sideX : px+sideX)), Math.round((top) ? sideY : height - sideY));\n\n\n\t\t\t\t// GRADIENTS\n\n\t\t\t\t\tgradientSize = side*Math.sin(alpha);\n\t\t\t\t\t\tvar endingPoint = flipMethods._c2.call(that, point.corner),\n\t\t\t\t\t\tfar = Math.sqrt(Math.pow(endingPoint.x-point.x, 2)+Math.pow(endingPoint.y-point.y, 2));\n\n\t\t\t\t\tgradientOpacity = (far<width) ? far/width : 1;\n\n\n\t\t\t\tif (data.opts.frontGradient) {\n\n\t\t\t\t\tgradientStartV = gradientSize>100 ? (gradientSize-100)/gradientSize : 0;\n\t\t\t\t\tgradientEndPointA = point2D(gradientSize*Math.sin(A90-alpha)/height*100, gradientSize*Math.cos(A90-alpha)/width*100);\n\n\t\t\t\t\tif (top) gradientEndPointA.y = 100-gradientEndPointA.y;\n\t\t\t\t\tif (left) gradientEndPointA.x = 100-gradientEndPointA.x;\n\t\t\t\t}\n\n\t\t\t\tif (flipMethods._backGradient.call(that)) {\n\n\t\t\t\t\tgradientEndPointB = point2D(gradientSize*Math.sin(alpha)/width*100, gradientSize*Math.cos(alpha)/height*100);\n\t\t\t\t\tif (!left) gradientEndPointB.x = 100-gradientEndPointB.x;\n\t\t\t\t\tif (!top) gradientEndPointB.y = 100-gradientEndPointB.y;\n\t\t\t\t}\n\t\t\t\t//\n\n\t\t\t\ttr.x = Math.round(tr.x);\n\t\t\t\ttr.y = Math.round(tr.y);\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\ttransform = function(tr, c, x, a) {\n\n\t\t\t\tvar f = ['0', 'auto'], mvW = (width-h)*x[0]/100, mvH = (height-h)*x[1]/100,\n\t\t\t\t\tv = {left: f[c[0]], top: f[c[1]], right: f[c[2]], bottom: f[c[3]]},\n\t\t\t\t\taliasingFk = (a!=90 && a!=-90) ? (left ? -1 : 1) : 0;\n\n\t\t\t\t\tx = x[0] + '% ' + x[1] + '%';\n\n\t\t\t\tthat.css(v).transform(rotate(a) + translate(tr.x + aliasingFk, tr.y, ac), x);\n\n\t\t\t\tdata.fpage.parent().css(v);\n\t\t\t\tdata.wrapper.transform(translate(-tr.x + mvW-aliasingFk, -tr.y + mvH, ac) + rotate(-a), x);\n\n\t\t\t\tdata.fwrapper.transform(translate(-tr.x + mv.x + mvW, -tr.y + mv.y + mvH, ac) + rotate(-a), x);\n\t\t\t\tdata.fpage.parent().transform(rotate(a) + translate(tr.x + df.x - mv.x, tr.y + df.y - mv.y, ac), x);\n\n\t\t\t\tif (data.opts.frontGradient)\n\t\t\t\t\tgradient(data.ashadow,\n\t\t\t\t\t\t\tpoint2D(left?100:0, top?100:0),\n\t\t\t\t\t\t\tpoint2D(gradientEndPointA.x, gradientEndPointA.y),\n\t\t\t\t\t\t\t[[gradientStartV, 'rgba(0,0,0,0)'],\n\t\t\t\t\t\t\t[((1-gradientStartV)*0.8)+gradientStartV, 'rgba(0,0,0,'+(0.2*gradientOpacity)+')'],\n\t\t\t\t\t\t\t[1, 'rgba(255,255,255,'+(0.2*gradientOpacity)+')']],\n\t\t\t\t\t\t\t3,\n\t\t\t\t\t\t\talpha);\n\n\t\t\t\tif (flipMethods._backGradient.call(that))\n\t\t\t\t\tgradient(data.bshadow,\n\t\t\t\t\t\t\tpoint2D(left?0:100, top?0:100),\n\t\t\t\t\t\t\tpoint2D(gradientEndPointB.x, gradientEndPointB.y),\n\t\t\t\t\t\t\t[[0.8, 'rgba(0,0,0,0)'],\n\t\t\t\t\t\t\t[1, 'rgba(0,0,0,'+(0.3*gradientOpacity)+')'],\n\t\t\t\t\t\t\t[1, 'rgba(0,0,0,0)']],\n\t\t\t\t\t\t\t3);\n\n\t\t\t};\n\n\t\tswitch (point.corner) {\n\t\t\tcase 'tl' :\n\t\t\t\tpoint.x = Math.max(point.x, 1);\n\t\t\t\tcompute();\n\t\t\t\ttransform(tr, [1,0,0,1], [100, 0], a);\n\t\t\t\tdata.fpage.transform(translate(-height, -width, ac) + rotate(90-a*2) , '100% 100%');\n\t\t\t\tfolding.transform(rotate(90) + translate(0, -height, ac), '0% 0%');\n\t\t\tbreak;\n\t\t\tcase 'tr' :\n\t\t\t\tpoint.x = Math.min(point.x, width-1);\n\t\t\t\tcompute();\n\t\t\t\ttransform(point2D(-tr.x, tr.y), [0,0,0,1], [0, 0], -a);\n\t\t\t\tdata.fpage.transform(translate(0, -width, ac) + rotate(-90+a*2) , '0% 100%');\n\t\t\t\tfolding.transform(rotate(270) + translate(-width, 0, ac), '0% 0%');\n\t\t\tbreak;\n\t\t\tcase 'bl' :\n\t\t\t\tpoint.x = Math.max(point.x, 1);\n\t\t\t\tcompute();\n\t\t\t\ttransform(point2D(tr.x, -tr.y), [1,1,0,0], [100, 100], -a);\n\t\t\t\tdata.fpage.transform(translate(-height, 0, ac) + rotate(-90+a*2), '100% 0%');\n\t\t\t\tfolding.transform(rotate(270) + translate(-width, 0, ac), '0% 0%');\n\t\t\tbreak;\n\t\t\tcase 'br' :\n\t\t\t\tpoint.x = Math.min(point.x, width-1);\n\t\t\t\tcompute();\n\t\t\t\ttransform(point2D(-tr.x, -tr.y), [0,1,1,0], [0, 100], a);\n\t\t\t\tdata.fpage.transform(rotate(90-a*2), '0% 0%');\n\t\t\t\tfolding.transform(rotate(90) + translate(0, -height, ac), '0% 0%');\n\n\t\t\tbreak;\n\t\t}\n\n\t\tdata.point = point;\n\n\t},\n\n\t_moveFoldingPage: function(bool) {\n\n\t\tvar data = this.data().f,\n\t\t\tfolding = flipMethods._foldingPage.call(this);\n\n\t\tif (folding) {\n\t\t\tif (bool) {\n\t\t\t\tif (!data.fpage.children()[data.ashadow? '1' : '0']) {\n\t\t\t\t\tflipMethods.setData.call(this, {backParent: folding.parent()});\n\t\t\t\t\tdata.fpage.prepend(folding);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (data.backParent)\n\t\t\t\t\tdata.backParent.prepend(folding);\n\n\t\t\t}\n\t\t}\n\n\t},\n\n\t_showFoldedPage: function(c, animate) {\n\n\t\tvar folding = flipMethods._foldingPage.call(this),\n\t\t\tdd = this.data(),\n\t\t\tdata = dd.f;\n\n\t\tif (!data.point || data.point.corner!=c.corner) {\n\t\t\tvar event = $.Event('start');\n\t\t\tthis.trigger(event, [data.opts, c.corner]);\n\n\t\t\tif (event.isDefaultPrevented())\n\t\t\t\treturn false;\n\t\t}\n\n\n\t\tif (folding) {\n\n\t\t\tif (animate) {\n\n\t\t\t\tvar that = this, point = (data.point && data.point.corner==c.corner) ? data.point : flipMethods._c.call(this, c.corner, 1);\n\n\t\t\t\tthis.animatef({from: [point.x, point.y], to:[c.x, c.y], duration: 500, frame: function(v) {\n\t\t\t\t\tc.x = Math.round(v[0]);\n\t\t\t\t\tc.y = Math.round(v[1]);\n\t\t\t\t\tflipMethods._fold.call(that, c);\n\t\t\t\t}});\n\n\t\t\t} else\t{\n\n\t\t\t\tflipMethods._fold.call(this, c);\n\t\t\t\tif (dd.effect && !dd.effect.turning)\n\t\t\t\t\tthis.animatef(false);\n\n\t\t\t}\n\n\t\t\tif (!data.fwrapper.is(':visible')) {\n\t\t\t\tdata.fparent.show().data().flips++;\n\t\t\t\tflipMethods._moveFoldingPage.call(this, true);\n\t\t\t\tdata.fwrapper.show();\n\n\t\t\t\tif (data.bshadow)\n\t\t\t\t\tdata.bshadow.show();\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\thide: function() {\n\n\t\tvar data = this.data().f,\n\t\t\tfolding = flipMethods._foldingPage.call(this);\n\n\t\tif ((--data.fparent.data().flips)===0)\n\t\t\tdata.fparent.hide();\n\n\t\tthis.css({left: 0, top: 0, right: 'auto', bottom: 'auto'}).transform('', '0% 100%');\n\n\t\tdata.wrapper.transform('', '0% 100%');\n\n\t\tdata.fwrapper.hide();\n\n\t\tif (data.bshadow)\n\t\t\tdata.bshadow.hide();\n\n\t\tfolding.transform('', '0% 0%');\n\n\t\treturn this;\n\t},\n\n\thideFoldedPage: function(animate) {\n\n\t\tvar data = this.data().f;\n\n\t\tif (!data.point) return;\n\n\t\tvar that = this,\n\t\t\tp1 = data.point,\n\t\t\thide = function() {\n\t\t\t\tdata.point = null;\n\t\t\t\tthat.flip('hide');\n\t\t\t\tthat.trigger('end', [false]);\n\t\t\t};\n\n\t\tif (animate) {\n\t\t\tvar p4 = flipMethods._c.call(this, p1.corner),\n\t\t\t\ttop = (p1.corner.substr(0,1)=='t'),\n\t\t\t\tdelta = (top) ? Math.min(0, p1.y-p4.y)/2 : Math.max(0, p1.y-p4.y)/2,\n\t\t\t\tp2 = point2D(p1.x, p1.y+delta),\n\t\t\t\tp3 = point2D(p4.x, p4.y-delta);\n\n\t\t\tthis.animatef({\n\t\t\t\tfrom: 0,\n\t\t\t\tto: 1,\n\t\t\t\tframe: function(v) {\n\t\t\t\t\tvar np = bezier(p1, p2, p3, p4, v);\n\t\t\t\t\tp1.x = np.x;\n\t\t\t\t\tp1.y = np.y;\n\t\t\t\t\tflipMethods._fold.call(that, p1);\n\t\t\t\t},\n\t\t\t\tcomplete: hide,\n\t\t\t\tduration: 800,\n\t\t\t\thiding: true\n\t\t\t\t});\n\n\t\t} else {\n\t\t\tthis.animatef(false);\n\t\t\thide();\n\t\t}\n\t},\n\n\tturnPage: function(corner) {\n\n\t\tvar that = this,\n\t\t\tdata = this.data().f;\n\n\t\tcorner = {corner: (data.corner) ? data.corner.corner : corner || flipMethods._cAllowed.call(this)[0]};\n\n\t\tvar p1 = data.point || flipMethods._c.call(this, corner.corner, (data.opts.turn) ? data.opts.turn.data().opts.elevation : 0),\n\t\t\tp4 = flipMethods._c2.call(this, corner.corner);\n\n\t\t\tthis.trigger('flip').\n\t\t\t\tanimatef({\n\t\t\t\t\tfrom: 0,\n\t\t\t\t\tto: 1,\n\t\t\t\t\tframe: function(v) {\n\t\t\t\t\t\tvar np = bezier(p1, p1, p4, p4, v);\n\t\t\t\t\t\tcorner.x = np.x;\n\t\t\t\t\t\tcorner.y = np.y;\n\t\t\t\t\t\tflipMethods._showFoldedPage.call(that, corner);\n\t\t\t\t\t},\n\n\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\tthat.trigger('end', [true]);\n\t\t\t\t\t},\n\t\t\t\t\tduration: data.opts.duration,\n\t\t\t\t\tturning: true\n\t\t\t\t});\n\n\t\t\tdata.corner = null;\n\t},\n\n\tmoving: function() {\n\n\t\treturn 'effect' in this.data();\n\n\t},\n\n\tisTurning: function() {\n\n\t\treturn this.flip('moving') && this.data().effect.turning;\n\n\t},\n\n\t_eventStart: function(e) {\n\n\t\tvar data = this.data().f;\n\n\t\tif (!data.disabled && !this.flip('isTurning')) {\n\t\t\tdata.corner = flipMethods._cornerActivated.call(this, e);\n\t\t\tif (data.corner && flipMethods._foldingPage.call(this, data.corner)) {\n\t\t\t\tflipMethods._moveFoldingPage.call(this, true);\n\t\t\t\tthis.trigger('pressed', [data.point]);\n\t\t\t\treturn false;\n\t\t\t} else\n\t\t\t\tdata.corner = null;\n\t\t}\n\n\t},\n\n\t_eventMove: function(e) {\n\n\t\tvar data = this.data().f;\n\n\t\tif (!data.disabled) {\n\t\t\te = (isTouch) ? e.originalEvent.touches : [e];\n\n\t\t\tif (data.corner) {\n\n\t\t\t\tvar pos = data.parent.offset();\n\n\t\t\t\tdata.corner.x = e[0].pageX-pos.left;\n\t\t\t\tdata.corner.y = e[0].pageY-pos.top;\n\n\t\t\t\tflipMethods._showFoldedPage.call(this, data.corner);\n\n\t\t\t} else if (!this.data().effect && this.is(':visible')) { // roll over\n\n\t\t\t\tvar corner = flipMethods._cornerActivated.call(this, e[0]);\n\t\t\t\tif (corner) {\n\t\t\t\t\tvar origin = flipMethods._c.call(this, corner.corner, data.opts.cornerSize/2);\n\t\t\t\t\tcorner.x = origin.x;\n\t\t\t\t\tcorner.y = origin.y;\n\t\t\t\t\tflipMethods._showFoldedPage.call(this, corner, true);\n\t\t\t\t} else\n\t\t\t\t\tflipMethods.hideFoldedPage.call(this, true);\n\n\t\t\t}\n\t\t}\n\t},\n\n\t_eventEnd: function() {\n\n\t\tvar data = this.data().f;\n\n\t\tif (!data.disabled && data.point) {\n\t\t\tvar event = $.Event('released');\n\t\t\tthis.trigger(event, [data.point]);\n\t\t\tif (!event.isDefaultPrevented())\n\t\t\t\tflipMethods.hideFoldedPage.call(this, true);\n\t\t}\n\n\t\tdata.corner = null;\n\n\t},\n\n\tdisable: function(disable) {\n\n\t\tflipMethods.setData.call(this, {'disabled': disable});\n\t\treturn this;\n\n\t}\n},\n\ncla = function(that, methods, args) {\n\n\tif (!args[0] || typeof(args[0])=='object')\n\t\treturn methods.init.apply(that, args);\n\telse if(methods[args[0]] && args[0].toString().substr(0, 1)!='_')\n\t\treturn methods[args[0]].apply(that, Array.prototype.slice.call(args, 1));\n\telse\n\t\tthrow args[0] + ' is an invalid value';\n};\n\n$.extend($.fn, {\n\n\tflip: function(req, opts) {\n\t\treturn cla(this, flipMethods, arguments);\n\t},\n\n\tturn: function(req) {\n\t\treturn cla(this, turnMethods, arguments);\n\t},\n\n\ttransform: function(transform, origin) {\n\n\t\tvar properties = {};\n\n\t\tif (origin)\n\t\t\tproperties[vendor+'transform-origin'] = origin;\n\n\t\tproperties[vendor+'transform'] = transform;\n\n\t\treturn this.css(properties);\n\n\t},\n\n\tanimatef: function(point) {\n\n\t\tvar data = this.data();\n\n\t\tif (data.effect)\n\t\t\tclearInterval(data.effect.handle);\n\n\t\tif (point) {\n\n\t\t\tif (!point.to.length) point.to = [point.to];\n\t\t\tif (!point.from.length) point.from = [point.from];\n\t\t\tif (!point.easing) point.easing = function (x, t, b, c, data) { return c * Math.sqrt(1 - (t=t/data-1)*t) + b; };\n\n\t\t\tvar j, diff = [],\n\t\t\t\tlen = point.to.length,\n\t\t\t\tthat = this,\n\t\t\t\tfps = point.fps || 30,\n\t\t\t\ttime = - fps,\n\t\t\t\tf = function() {\n\t\t\t\t\tvar j, v = [];\n\t\t\t\t\ttime = Math.min(point.duration, time + fps);\n\n\t\t\t\t\tfor (j = 0; j < len; j++)\n\t\t\t\t\t\tv.push(point.easing(1, time, point.from[j], diff[j], point.duration));\n\n\t\t\t\t\tpoint.frame((len==1) ? v[0] : v);\n\n\t\t\t\t\tif (time==point.duration) {\n\t\t\t\t\t\tclearInterval(data.effect.handle);\n\t\t\t\t\t\tdelete data['effect'];\n\t\t\t\t\t\tthat.data(data);\n\t\t\t\t\t\tif (point.complete)\n\t\t\t\t\t\t\tpoint.complete();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\tfor (j = 0; j < len; j++)\n\t\t\t\tdiff.push(point.to[j] - point.from[j]);\n\n\t\t\tdata.effect = point;\n\t\t\tdata.effect.handle = setInterval(f, fps);\n\t\t\tthis.data(data);\n\t\t\tf();\n\t\t} else {\n\t\t\tdelete data['effect'];\n\t\t}\n\t}\n});\n\n\n$.isTouch = isTouch;\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}