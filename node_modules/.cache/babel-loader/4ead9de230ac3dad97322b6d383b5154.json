{"ast":null,"code":"import { useState } from 'react';\nimport screenfull from 'screenfull';\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect';\nimport { noop, off, on } from './misc/util';\nvar useFullscreen = function useFullscreen(ref, enabled, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var video = options.video,\n    _a = options.onClose,\n    onClose = _a === void 0 ? noop : _a;\n  var _b = useState(enabled),\n    isFullscreen = _b[0],\n    setIsFullscreen = _b[1];\n  useIsomorphicLayoutEffect(function () {\n    if (!enabled) {\n      return;\n    }\n    if (!ref.current) {\n      return;\n    }\n    var onWebkitEndFullscreen = function onWebkitEndFullscreen() {\n      if (video === null || video === void 0 ? void 0 : video.current) {\n        off(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);\n      }\n      onClose();\n    };\n    var onChange = function onChange() {\n      if (screenfull.isEnabled) {\n        var isScreenfullFullscreen = screenfull.isFullscreen;\n        setIsFullscreen(isScreenfullFullscreen);\n        if (!isScreenfullFullscreen) {\n          onClose();\n        }\n      }\n    };\n    if (screenfull.isEnabled) {\n      try {\n        screenfull.request(ref.current);\n        setIsFullscreen(true);\n      } catch (error) {\n        onClose(error);\n        setIsFullscreen(false);\n      }\n      screenfull.on('change', onChange);\n    } else if (video && video.current && video.current.webkitEnterFullscreen) {\n      video.current.webkitEnterFullscreen();\n      on(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);\n      setIsFullscreen(true);\n    } else {\n      onClose();\n      setIsFullscreen(false);\n    }\n    return function () {\n      setIsFullscreen(false);\n      if (screenfull.isEnabled) {\n        try {\n          screenfull.off('change', onChange);\n          screenfull.exit();\n        } catch (_a) {}\n      } else if (video && video.current && video.current.webkitExitFullscreen) {\n        off(video.current, 'webkitendfullscreen', onWebkitEndFullscreen);\n        video.current.webkitExitFullscreen();\n      }\n    };\n  }, [enabled, video, ref]);\n  return isFullscreen;\n};\nexport default useFullscreen;","map":null,"metadata":{},"sourceType":"module"}